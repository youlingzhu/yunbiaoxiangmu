
#{extends 'LatoWebDelegate/mainServicesList.html' /}
#{set title:'本地应用空间详情' /}
#{set appInfo:'true' /}
#{set returnLinkLable:'返回应用空间列表' /}
#{set 'returnLink'}
@{LatoWebDelegate.getLocalServerAppFormList(serviceCode,serverName)}
#{/set}
#{set 'latoMainSide'}
   
 <div class="lato-main-side" > 
    <div id="lato-main-side_a">
		<!--<a href="@{LatoWebDelegate.getIndexForm()}" class="list_back_a">控制台</a>
		<img src="@{'/public/images/vector38.png'}" >
		<a href="@{LatoWebDelegate.getLocalServiceFormList()}" class="list_back_a"> 本地服务器&nbsp;>></a>
		<img src="@{'/public/images/vector38.png'}" >
		<a href="@{LatoWebDelegate.getLocalServerAppFormList(serviceCode,serverName)}" class="list_back_a">应用空间管理</a>
		<img src="@{'/public/images/vector38.png'}" >-->
	</div>
	
	
	 <!-- <form id="defaultForm" method="post" class="form-horizontal" action="" > -->
	
		 <div class="main_body localServer_appInfo">
			
			<div class="body_name body_menu1 clearfix localServer_appInfo_one">
				<label class="menu_name">本地应用空间详情</label>
		    </div>
			
		   <!-- <div class="body_menu1_yingyong"> -->
				<div class="body_name body_menu1 clearfix localServer_appInfo_two">
					<!-- <span id="spaceNameSpan">bianji</span> -->
					<label class="menu_name_app">应用空间名称</label>
					<label class="detail_text1 localServer_appInfo_two_spacelable" id="spaceNameLableOne">${flash.应用名称} </label>
					<img class="editPic" src="@{'/public/images/bianji.png'}" id="spaceNameSpan" >
					<input type="text" class="localServer_appInfo_two_input" id="spaceName">
					<span id="textPrompt" class="localServer_appInfo_two_span">请输入最大为40位数的应用名称</span>
				</div>
				<div class="body_name body_menu1 clearfix localServer_appInfo_three">
					<label class="menu_name_app">应用空间ID</label>
					<label class="detail_text detail_textone">${flash.空间ID} </label>
				</div>
			<!-- </div>	  -->
			
			<div class="body_menu1_yingyong">
			 <div class="body_name body_menu1 clearfix localServer_appInfo_four">
				<label class="menu_name_app">模板数</label>
				<label class="detail_text detail_textone">${flash.模板数}</label>
			 </div>
			 <div class="body_name body_menu1 clearfix localServer_appInfo_five">
				<label class="menu_name_app">并发数</label>
				<label class="detail_text detail_textone">${flash.并发数}</label>
			 </div> 
			</div>

			 <!-- <div class="body_menu1_yingyong"> -->
			 <div class="body_name body_menu1 clearfix localServer_appInfo_six">
				<label class="menu_name_app">到期时间</label>
				<label class="detail_text detail_textone">${flash.到期时间}</label>
			 </div> 
			 <div class="body_name body_menu1 clearfix localServer_appInfo_seven">
				<label class="menu_name_app">应用描述</label>
				<label class="localServer_appInfo_seven_lable_two">
					${flash.应用描述}</label> 
			</div>
			<!-- </div> -->
			
			<!-- width: 300px;
			height: 30px;
			 -->

			 <!-- <div class="body_menu1_yingyong"> -->
				<div class="body_name body_menu1 clearfix localServer_appInfo_eight">
					<!-- <span id="spaceUrlOne">tupian1</span>   -->
					<label class="menu_name_app" >APP横幅图片链接
					</label>
					<label class="detail_text_picTureOne" id="detail_text_picTureOne">${flash.横幅图片链接}</label>
					<img class="editPic localServer_appInfo_eight_img" src="@{'/public/images/bianji.png'}" id="spaceUrlOne">
				    <textarea type="text" id="spacePictureOne"></textarea>
				</div>
				<div class="body_name body_menu1 clearfix localServer_appInfo_nine">
					<!-- <span id="spaceUrlTwo">tupian2</span> -->
				<label class="menu_name_app">APP图标图片链接</label>
					<label class="detail_text_picTureTwo" id="detail_text_picTureTwo">${flash.图标图片链接}
					</label>
					<img class="editPic localServer_appInfo_eight_img" src="@{'/public/images/bianji.png'}" id="spaceUrlTwo" > 
					<textarea type="text" id="spacePictureTwo"></textarea> 
				</div>

			<!-- </div>-->

			<div class="body_name body_menu1 clearfix localServer_appInfo_ten">
				<!-- <a class="btu_update sever_local" id="activeoOne" href="@{LatoWebDelegate.getUpdateAppInfo(serverAppCode,serviceCode,serverAppId,serverAppCode,serverName)}">设置</a> -->
				<a class="btu_postpone sever_local localServer_appInfo_ten_a_one" id="activeoTwo" href="@{LatoWebDelegate.getLocalServerAppPostpone(serviceCode,serverAppId,serverAppCode,serverName)}">续费</a>
				<!-- <a class="btu_upgrade sever_local" id="activeoThree" href="@{LatoWebDelegate.getLocalServerAppUpgrade(serviceCode,serverAppId,serverAppCode,serverName)}">升级</a> -->
				<a class="btu_upgrade sever_local localServer_appInfo_ten_a_two" id="activeoThree" href="javascript:;">升级</a>
			</div>
           <hr class="localServer_appInfo_ten_hr" />

     
            <label class="menu_name localServer_appInfo_ten_lable_one">已安装产品（模板库）</label>
            <div id="InstalledProduct">
				
                <div class="body_name body_menu1 clearfix localServer_appInfo_eleven">
					<label class="menu_name_app">产品名称</label>
					<label class="detail_text_picTureTwo" id="chanpinName" ></label> 
				</div>
				<div class="body_name body_menu1 clearfix localServer_appInfo_twelve">
				
					<label class="menu_name_app">产品描述</label>
					<label class="detail_text_picTureTwo" id="chanpinNumber"></label> 
				</div>
				<div class="body_name body_menu1 clearfix localServer_appInfo_thirteen">
					<label class="menu_name_app">安装时间</label>
					<label class="detail_text_picTureTwo" id="chanTime"></label> 
				</div>
             </div>
			

				<div class="bottomProduct localServer_appInfo_bottomProduct">  
					<span class="detail_text detail_product localServer_appInfo_bottomProduct_one" id="detailTextImport" data-toggle="modal" data-target="#loca_app_back_model_product" data-toggle="modal">导入产品</span>
					<!-- <span data-toggle="modal" style="margin-left: 0px;margin-right:11px;" class="detail_product" data-target="#loca_app_back_model" data-toggle="modal" id="proudectChongzhuang"  >更新</span> -->
					<span data-toggle="modal" class="detail_product localServer_appInfo_bottomProduct_two"  data-target="#loca_app_back_model_history" id="proudectHistory" data-toggle="modal" >&nbsp;&nbsp;历史版本</span>
				 </div>
 
			
			</div>
				
				
				


            </div>
			
			
		</div>
	 

			
<!-- 历史记录模态框弹框 -->
	<div class="modal fade" id="loca_app_back_model_history" tabindex="-1" role="dialog" aria-labelledby="loca_app_back_model"
	aria-hidden="true">
		<div class="modal-dialog" style="width:60%">
			<div class="modal-content">
				<div class="modal-header">
					<div class="modal-header">
						<div class="modal-header">
							<span onclick="closeModel()">+</span>  
							<button type="button" class="close" data-dismiss="modal" aria-hidden="true">
							</button>
							<h4 class="modal-title" id="loca_app_back_model1">
								<span class="localServer_appInfo_model_history_span" id="errorTypeSpan1">历史版本模板库</span>
							</h4> 
						</div>
					</div>
				</div>
				<!-- data-url= -->
				<div class="modal-body">
					<!-- data-url="@{LatoWebDelegate.getJsonData('软件产品版本信息','查询允许更换的产品信息列表(产品编号)')}" -->
				<table data-toggle="table" id="app_back_table_history" name="localServer" data-click-to-select="true"
						data-header-style="headerStyle" data-search="true" data-pagination="true"
						data-select-item-name="radioName">
					
					<thead>
						<tr>
							<th data-field="产品名称" data-halign="center" data-align="center">产品名称</th>
							<th data-field="产品编号" data-halign="center" data-align="center">产品编号</th>
							<th data-field="版本描述" data-halign="center" data-align="center">描述</th>
							<th data-field="版本号" data-halign="center" data-align="center">版本号</th>
							<th data-field="更新时间" data-halign="center" data-align="center">更新时间</th>
						</tr>
					</thead>
					</table>
				</div>
				<div class="modal-footer">
					<button type="button" class="canle_model" data-dismiss="modal">取消
					</button>
				
				</div>
			</div>
		</div>
    </div>

<!-- 更新模板模态框弹框需要有编号 -->
	<div class="modal fade" id="loca_app_back_model" tabindex="-1" role="dialog" aria-labelledby="loca_app_back_model"
		aria-hidden="true">
		<div class="modal-dialog">
			
			<div class="modal-content">
				<div class="modal-header">
					<span onclick="closeModel()">+</span>  
					<button type="button" class="close" data-dismiss="modal" aria-hidden="true">
					</button>
					<h4 class="modal-title" id="loca_app_back_model">
						<span id="errorTypeSpan" style="color: #373F4A;">请选择相应的模板库</span>
					</h4>
				</div>
				<!-- data-url= -->
				<div class="modal-body">
					<!-- data-url="@{LatoWebDelegate.getJsonData('软件产品版本信息','查询允许更换的产品信息列表(产品编号)')}" -->
					<table data-toggle="table" id="app_back_table" name="localServer" data-click-to-select="true"
						data-header-style="headerStyle" data-search="true" data-pagination="true"
						data-select-item-name="radioName">
						<thead>
							<tr>
								<th data-field="lato_state" data-radio="true" 
									data-formatter="stateFormatter"></th>
								<th data-field="产品编号" data-halign="center" data-align="center">产品编号</th>
								<th data-field="产品名称" data-halign="center" data-align="center">产品名称</th>
								<th data-field="模板总数量" data-halign="center" data-align="center">模板总数量</th>
								<th data-field="版本号" data-halign="center" data-align="center">版本号</th>
								<th data-field="是否开源" data-halign="center" data-align="center">是否开源</th>
								<th data-field="私有产品" data-halign="center" data-align="center">私有产品</th>
								<th data-field="支持二次发布" data-halign="center" data-align="center">支持二次发布</th>
								<th data-field="发布时间" data-halign="center" data-align="center">发布时间</th>
							</tr>
						</thead>
					</table>
				</div>

				<div class="modal-footer">
					<button type="button" class="canle_model" data-dismiss="modal">取消
					</button>

					<button type="button"  id="btnSuccessNext" onclick="selectProdct()">下一步</button>
				</div>
			</div>
		</div>
	</div>
	<!-- class="btn btn-primary" -->

<!-- 更新模板库没有编号，产品导入的模态框 -->

<div class="modal fade localServer_appInfo_model_bianhao" id="loca_app_back_model_product" tabindex="-1" role="dialog" aria-labelledby="loca_app_back_model"
		aria-hidden="true">
		<div class="modal-dialog">
			
			<div class="modal-content">
				<div class="modal-header">
					<span onclick="closeModel()">+</span>  
					<button type="button" class="close" data-dismiss="modal" aria-hidden="true">
					</button>
					<h4 class="modal-title" id="loca_app_back_model">
						<span id="errorTypeSpan">请选择相应的模板库</span>
					</h4>
				</div>
				<!-- data-url= -->
				<div class="modal-body">
					<!-- data-url="@{LatoWebDelegate.getJsonData('软件产品版本信息','查询允许更换的产品信息列表(产品编号)')}" -->
					<table data-toggle="table" id="app_back_table_product" name="localServer" data-click-to-select="true"
						data-header-style="headerStyle" data-search="true" data-pagination="true"
						data-select-item-name="radioName">
						<thead>
							<tr>
								<th data-field="lato_state" data-radio="true" 
									data-formatter="stateFormatter"></th>
								<th data-field="产品编号" data-halign="center" data-align="center">产品编号</th>
								<th data-field="产品名称" data-halign="center" data-align="center">产品名称</th>
								<th data-field="模板总数量" data-halign="center" data-align="center">模板总数量</th>
								<th data-field="版本号" data-halign="center" data-align="center">版本号</th>
								<th data-field="是否开源" data-halign="center" data-align="center">是否开源</th>
								<th data-field="私有产品" data-halign="center" data-align="center">私有产品</th>
								<th data-field="支持二次发布" data-halign="center" data-align="center">支持二次发布</th>
								<th data-field="发布时间" data-halign="center" data-align="center">发布时间</th>
							</tr>
						</thead>
					</table>
				</div>

				<div class="modal-footer">
					<button type="button" class="canle_model" data-dismiss="modal">取消
					</button>
					<button type="button" id="btnSuccessNext_productImport" onclick="selectProdctProduct()">下一步</button>
				</div>
			</div>
		</div>
	</div>



<!--  模板库更新弹框 更新前 更新后 -->
    <div class="alertBoxWarningThree localServer_appInfo_model_upDate" id="alertBoxWarningThree">
		<div class="upDateTop"></div>
	<div class="alertBoxWarningTh">
		<div class="title">
			模板库更新
		</div>
		<span id="alertBoxWarningThreeSpan">+</span>

		<div class="content">

			<div class="left">

				<div class="titleTop">
					<i></i>
					<span>更新前</span>
				</div>

				<div class="mySystem">
					<ul class="localServer_appInfo_model_upDate_ul_one" id="ulMySystemLeft">
					</ul>
				</div>



			</div>



			<div class="rigth">
				<div class="titleTop">
					<i></i>
					<span>更新后</span>
				</div>

				<div class="mySystem">
					<ul class="localServer_appInfo_model_upDate_ul_two" id="ulMySystemRight">

					</ul>
				</div>
			</div>


		</div>

		<div class="agree localServer_appInfo_agree" id="agreeMb">
	       		
			<!-- <input type="checkbox" name="checkbox" />&nbsp;&nbsp;<span>更新为<i style="color: red;font-style: normal;">不可逆</i>行为，请谨慎操作</span><br /> -->
			<input id="fengxianInput" type="checkbox" name="checkbox" />
			<span>我已阅读<b class="active">《模板库更新风险须知》</b>, 了解并愿意承担本次操作的风险</span>
			<div id="wenzi" class="wenzi">
				<p class="p1">模板库更新风险须知</p>

				<p class="p2">
					1、模版库更新操作不可逆,被修改的模版，将无法恢复。<br />
					2、【确认更新】后,原模版库的同名模版将被覆盖，不同名的模版将保留。<br />
					3、更新后的模版数不能超过模版数上限。 <br />
					4、更新不影响该模版下的表单数据。<br />
					5、云表平台(珠海乐图软件有限公司)不对模版库更新中人为操作导致的后果负责。<br />
				</p>
				<p class="p3"></p>
			</div>
		
		</div>

		<div id="agreeBtn" class="localServer_appInfo_agreeBtn">
			<p>
				<span class="localServer_appInfo_agreeBtn_spanOne" id="queRenCalData">取消</span>
				<span class="localServer_appInfo_agreeBtn_spanTwo" id="queRenNext">上一步</span>
				<span class="localServer_appInfo_agreeBtn_spanThree" id="queRenUpData">确认更新</span>
			</p>

		</div>

		<!-- -->
       
		<!---->

	</div>


    </div>
	 
<!-- 警告框二 立即升级模板库 -->

<div class="alertBoxWarningTwo" id="alertBoxWarningTwo">
	<div class="upDateTop"></div>
	<div class="alertBoxWarningT">
		<span id="alertBoxWarningTwoSpan">+</span>

		<!-- <p 
				background: url('') no-repeat;"></p> -->
		<img src="@{'/public/images/Group36.png'}">
		<p class="upDataP">当前模板数不足，请升级应用空间后再试</p>

		<p id="upDataModel">
			<span class="btn1">取消</span>
			<span class="btn2">立即升级</span>
		</p>
	</div>

</div>

	

<!-- 输入验证码弹框 -->
<div class="alertBoxWarning" id="alertBoxWarningOne">
	<div class="upDateTop"></div>
	<div class="alertBoxOne">
		<span id="alertBoxWarningOneSpan">+</span>

		<div class="title" style="text-align: center">
			<p class="p1">
				<!-- <span style="background: url('/public/images/Rectangle350.png') no-repeat;
						width: 4px;
						height: 20px;"></span> -->
				<img src="@{'/public/images/Rectangle350.png'}">
				<span></span>
			</p>
			<p class="p2">当前操作不可逆,请谨慎执行</p>
			<p class="p3">我们将发送短信验证至<i>133****2345</i>以确保是您本人操作</p>
		</div>
		<div class="messageCode">
			<!-- <span background: url('/public/images/163.png') no-repeat"></span> -->
			<img src="@{'/public/images/163.png'}">
			<input id="yanzhengmaCode" type="text" />
			<button id="sendVerifiCationCode">发送验证码</button>
		</div>
		<p id="alertBoxWarningOneYanzhengP">请输入验证码</p>
		<!-- <img src="@{'/public/images/163.png'}" style="width: 90px;"> -->
		<div class="ConfirmCancel" id="confirmCancel">
			<span class="btn1">取消</span>
			<span class="btn2">确认</span>
		</div>
	</div>
</div>

<!-- 短信发送成功后升级成功后的弹框 -->
<div class="contentRight" id="myAlert">
	<div class="upDateTop"></div>	
	<div class="alertBoxWarningT">
			<span id="alertSuccessDom">+</span>
			   <div id="succsImg" style="border-radius: 50%;margin-left:auto;margin-top:60px;">
				 <!-- <div class="succsImgChild" style="margin:15px auto;width: 4px; height: 27px;border: 1px solid transparent;">
					<span style="display: block;width: 4px;height: 20px;background-color:white;margin-bottom: 2px;margin-top:13px"></span>
					<span style="display: block;width: 4px;height: 4px;background-color: white;"></span>
				 </div> -->
				 <img src="@{'/public/images/succsImg.png'}" >
			   </div>
			    <p id="shujuSuccs">数据提交成功</p>
				<span id="yanzhengmgSucceBtn">确认</span>
			  	</div>
	</div>


	<!-- 点击升级按钮欠费弹框 -->
   
   <!-- 点击升级按钮欠费弹框 -->
   <div class="alertBoxWarningTwo" id="giveMoneyAlert" style="display: none;">  
	<div class="upDateTop"></div>
	<div class="alertBoxWarningT">
		<span id="giveMoneyAlertSpan">+</span>
		 <div id="succsImgMoney"> 
		<!-- <p   
			background: url('') no-repeat;"></p> -->
		<img src="@{'/public/images/Group36.png'}">
		</div>
		<p id="shujuSuccsMoney">您当前应用已欠费，请续费后再试</p>

		<p class="alertPWarning">
			<button class="btn1" id="giveMoneyAlertCancel">取消</button>
			<a class="btn2" href="@{LatoWebDelegate.getLocalServerAppPostpone(serviceCode,serverAppId,serverAppCode,serverName)}">立即续费</a>
		</p>
	</div>

</div>
	 

	<!-- <p style="height: 40px; padding-left: 222px; margin-top: 26px; float: left;">
		<span id="queRenCalData" style="left: 166px;">取消</span>
		<span id="queRenNext" style="left: 302px; line-height: 40px; position: absolute; cursor: pointer;">上一步</span>
		<span disabled="disabled" id="queRenUpData" style="left: 438px; cursor: not-allowed; background-color: gray;">确认更新</span>
	</p> -->
		
		<!-- <div class="main_title_w main_title ">
			<h3>
				#{get 'title' /}<span lato-separator>&nbsp;</span>
			</h3>
			<a href="@{LatoWebDelegate.getLocalServerAppFormList(serviceCode,serverName)}" class="list_back">返回应用空间列表</a>
		</div> -->
		<!-- 开始的主页面 -->
		
	
	
	 <!-- </form> -->
 </div> 
	
<script type="text/javascript">

$(document).ready(function() {
	$('#sub-item-2').addClass('in');	
});

// <input type="text" value="数据统计" id="lato_app_name" name="lato_app_name" placeholder="请输入应用名称"  class="appname value_color1"/>
// <input type="text" value="" id="lato_app_banner_url"  name="lato_app_banner_url" placeholder="请输入APP横幅图片链接,需要输入完整地址,http://" class="appname value_color1"/>
// <input type="text" value="" id="lato_app_icon_url"  name="lato_app_icon_url" placeholder="请输入APP图标图片链接,需要输入完整地址,http://" class="appname value_color1"/>
//<input type="hidden" name="lato_objectId"  id="lato_objectId" value="${flash.lato_objectId}" /> 
//<input type="hidden" name="lato_global_app_id"  id="lato_global_app_id" value="${flash.globalAppId}" /> 

	
serverCode();


function postAjax(jsonDate){
	console.log(jsonDate)
	$.post("@{LatoWebDelegate.putForm('updateAppForm')}",jsonDate,function(data){
	    var data=JSON.parse(data);
	    console.log(data,527)
	})
}

// 应用空间名称更改
$('#spaceNameSpan').on('click',function(){
	$(this).hide();
	var textStr=$('#spaceNameLableOne').text();
	$('#spaceName').val(textStr); 
	$('#spaceNameLableOne').hide();
	$('#spaceName').show();
	$('#spaceName').focus();
})

$('#spaceName').on('blur',function(){
    if($('#spaceName').val().length>40){
		 $('#textPrompt').show();
		 return
	}else{
		$('#textPrompt').hide(); 
		var textStrOne=$('#spaceName').val();
		var jsonDate={
			lato_global_app_id:'${serverAppCode}',
			lato_app_name: textStrOne,
			lato_app_banner_url:$('#detail_text_picTureOne').text(),
			lato_app_icon_url:$('#detail_text_picTureTwo').text()
		}
		$('#spaceNameLableOne').show();
		$('#spaceName').hide();
		$('#spaceNameLableOne').text(textStrOne); 
		$('#spaceNameSpan').show();
		window.localStorage.setItem('nameServer',textStrOne);
       // $('#reloadPages_name').text(textStrOne);   
		postAjax(jsonDate);
	}
})



$("#spaceName").on("input propertychange", function() {
            var text = $("#spaceName").val();
			var textlen = $("#spaceName").val().length;
			
            if(textlen>40){
				$('#textPrompt').show();
              //  var lenText=text.substring(0,10)
              //  $("#spaceName").val(lenText)
            }else{
				$('#textPrompt').hide();
			}
});

// 横幅图片链接更改
 $('#spaceUrlOne').on('click',function(){
	$(this).hide();
	 var textStr=$('#detail_text_picTureOne').text();
	 textStr=textStr.replace(/^\s+|\s+$/g,'')
	 $('#spacePictureOne').val(textStr);
	 $('#detail_text_picTureOne').hide();
	 $('#spacePictureOne').show();
	 $('#spacePictureOne').focus();
 })
  

 $('#spacePictureOne').on('blur',function(){
	var textStrOne=$('#spacePictureOne').val();
	 var jsonDate={
		lato_global_app_id:'${serverAppCode}',
		lato_app_name: $("#spaceNameLableOne").text(),
		lato_app_banner_url:textStrOne,
		lato_app_icon_url:$('#detail_text_picTureTwo').text()
	 }
	 $('#detail_text_picTureOne').text(textStrOne);
	 $('#spacePictureOne').val(textStrOne);
	 $('#detail_text_picTureOne').show();
	 $('#spaceUrlOne').show();
	 $('#spacePictureOne').hide();
	 postAjax(jsonDate);
 })

  
 // 图标图片链接更改
 $('#spaceUrlTwo').on('click',function(){
	$(this).hide();
	 var textStr=$('#detail_text_picTureTwo').text();
	 textStr=textStr.replace(/^\s+|\s+$/g,'')
	 $('#spacePictureTwo').val(textStr);
	 $('#detail_text_picTureTwo').hide();
	 $('#spacePictureTwo').show();
	 $('#spacePictureTwo').focus();
 })
  


 $('#spacePictureTwo').on('blur',function(){
	var textStrOne=$('#spacePictureTwo').val();
	 var jsonDate={
		lato_global_app_id:'${serverAppCode}',
		lato_app_name: $("#spaceNameLableOne").text(),
		lato_app_banner_url:$('#detail_text_picTureOne').text(),
		lato_app_icon_url:textStrOne
	 }
	 $('#detail_text_picTureTwo').text(textStrOne);
	 $('#spacePictureTwo').val(textStrOne);
	 $('#detail_text_picTureTwo').show();
	 $('#spaceUrlTwo').show();
	 $('#spacePictureTwo').hide();
	 postAjax(jsonDate);
 })




    var urlData='${serverAppCode}';
	var nameNumber=null;
	var objectModelInit = '';
	var upDataModel=document.getElementById('upDataModel');
	var alertBoxWarningTwoDom = document.getElementById('alertBoxWarningTwo'); // 模板库升级div
	var alertBoxWarningTwoDomBtn = upDataModel.getElementsByTagName('span'); // 模板库升级取消和立即升级按钮
	var objectModelInitString = null;       // 判断初始化数据是否有值
	var objectModelInit = '';               // ajaxuser() 的JSON.parse(xhr.responseText);值后面再更新前后需要用到
	var SelectedTemplateData = null;       // 选择更新模板的数组,这个值是最新,被选中的那个值
	var urlurl=window.location.href;
	
	ajaxuser();
	function ajaxuser() {
		$.get('@{LatoWebApiDelegate.getAppProductInfo}?appCode=' + urlData, function (data) {
			if(data){
				objectModelInitString=data;
				var responseJson = JSON.parse(data);
				//SelectedTemplateData=[responseJson];
				//console.log(responseJson,546)
				var nameProduct = responseJson.产品名称;
				nameNumber = responseJson.产品编号;
				var nameTime=responseJson.发布时间;
				var banbenmiaoshu=responseJson.版本描述;
				if (!nameNumber) {
					$('#detailTextImport').show();
					$('#InstalledProduct').hide();
					$('#proudectHistory').hide();
				} else {
					$('#detailTextImport').hide();
					$('#InstalledProduct').show();
					$('#proudectHistory').show();
					$("#chanpinName").text(nameProduct);
					if(banbenmiaoshu){
						$("#chanpinNumber").text(banbenmiaoshu);
					}
					$('#chanTime').text(nameTime);
				}
				objectModelInit = responseJson;
			}
		})
	}
	

	var succsStr='产品导入成功';
	var chooseModel=true;
	var fengxianInput=document.getElementById('fengxianInput');
     

	// 产品更新按钮
	$('#proudectChongzhuang').on('click', function () {
		succsStr = '产品更新成功';
		chooseModel=true;
		importProductNum();
	})

	$('#detailTextImport').on('click', function () {
		succsStr = '产品导入成功';
		chooseModel=false;
		importProduct();
	})
 
	$('#proudectHistory').on('click',function(){
		tableHistory();
	})


	$('#queRenNext').on('click', function () {
		$('#alertBoxWarningThree').hide();
		// $('#alertBoxWarningOne').hide();
		if(chooseModel){
			importProductNum();
			$('#loca_app_back_model').modal('show');
			console.log('产品编号模态框')
		}else{
			importProduct(); 
			$('#loca_app_back_model_product').modal('show');
			console.log('产品导入模态框')
		}
		
	})

	// 模态框出现之前，把选中的取消
	$('#loca_app_back_model').on('show.bs.modal', function () {
		$("#app_back_table").bootstrapTable('uncheckAll');
	})

	// 模态框出现之前，把选中的取消
	$('#loca_app_back_model_product').on('show.bs.modal', function () {
		$("#app_back_table_product").bootstrapTable('uncheckAll');
	})


	// 历史记录模态框
	function tableHistory(){
		$('#app_back_table_history').bootstrapTable('destroy');
		$('#app_back_table_history').bootstrapTable({
		url: '@{LatoWebDelegate.getJsonData("应用产品更换","查询更新产品列表(应用唯一值)")}?%E5%BA%94%E7%94%A8%E5%94%AF%E4%B8%80%E5%80%BC='+urlData,
	    pagination: true,
		    pageSize:10,
		    onlyInfoPagination: false,
        	queryParamsType: "",
	        queryParams:  function  (params) {
	            return {pageSize: params.pageSize, pageNumber: params.pageNumber};
	        },
	   });
	}
  
	
//    $.get('@{LatoWebDelegate.getJsonData("应用产品更换","查询更新产品列表(应用唯一值)")}?%E5%BA%94%E7%94%A8%E5%94%AF%E4%B8%80%E5%80%BC='+urlData,function(data){
// 	   console.log(JSON.parse(data));
//    })



   
	
	// 产品升级模态框,地址后面需要加产品编号
	function importProductNum(){
		$('#app_back_table').bootstrapTable('destroy');
		$('#app_back_table').bootstrapTable({
			url: '@{LatoWebDelegate.getJsonData("软件产品版本信息","查询允许更换的产品信息列表(产品编号)")}?%E4%BA%A7%E5%93%81%E7%BC%96%E5%8F%B7='+
			nameNumber,
			pagination: true,
			pageSize:10,
			onlyInfoPagination: false,
			queryParamsType: "",
			queryParams:  function  (params) {
				return {pageSize: params.pageSize, pageNumber: params.pageNumber};
			},
		});
	}

	// 产品导入模态框
	function importProduct(){
		$('#app_back_table_product').bootstrapTable('destroy');
		$('#app_back_table_product').bootstrapTable({
			url: '@{LatoWebDelegate.getJsonData("软件产品版本信息","查询允许更换的产品信息列表(产品编号)")}',
				pagination: true,
				pageSize:10,
				onlyInfoPagination: false,
				queryParamsType: "",
				queryParams:  function  (params) {
					return {pageSize: params.pageSize, pageNumber: params.pageNumber};
				},
		});
	}
	 
	
	// 下一步有产品编号
	function selectProdct() {
		rowNewSelect = null;
		var row = $("#app_back_table").bootstrapTable('getSelections');
		SelectedTemplateData = row;
		if (row.length > 0) {
			$('#loca_app_back_model').modal('hide');
			$('#loca_app_back_model_product').modal('hide');
			newOldDuiBi(row);
		}
	}

	// 下一步产品导入
	function selectProdctProduct() {
		rowNewSelect = null;
		var row = $("#app_back_table_product").bootstrapTable('getSelections');
		SelectedTemplateData = row;
		if (row.length > 0) {
			$('#loca_app_back_model').modal('hide');
			$('#loca_app_back_model_product').modal('hide');
			newOldDuiBi(row);
		}
	}
	
	var objectModelUpdata = null;                                                  // 根据获取指定产品的信息接口获取的objectModelUpdata = JSON.parse(xhr.responseText)的值
//	var SelectedTemplateData = null;                                               // 选择更新模板的数组,这个值是最新的值；这个值在发送验证码的时候需要用到，产品编号和版本号
	var upDataModleData = null;                                                    // 选择更新模板的数组, 和上面的SelectedTemplateData一样
    var alertBoxWarningThreeDom = document.getElementById('alertBoxWarningThree');  //模板库更新前后的div
	var ulMySystemLeftDom = document.getElementById('ulMySystemLeft');              //模板库更新左边的ul
	var ulMySystemRightDom = document.getElementById('ulMySystemRight');            //模板库更新右边的ul 
	var arrLeft = [];    // 左边数组里面的值
	var arrRight = [];   // 右边数组里面的值
	
	var agreeMb = document.getElementById('agreeMb'); // 我已阅读《模板库更新风险须知》的父级
	var agreeMbInput = agreeMb.getElementsByTagName('input'); // 模板更新的复选框
	var ob = agreeMb.getElementsByTagName('b')[0];   //《模板库更新风险须知》 按钮
	var wenzi = document.getElementById('wenzi');    // 显示文字div
	var onOff = true;            // 文字显示和隐藏的div
	var agreeBtnDom = document.getElementById('agreeBtn'); // 确认更新div  
	var agreeInputBtn = agreeBtnDom.getElementsByTagName('span'); // 确认更新button
	var alertBoxWarningThreeSpanDom = document.getElementById('alertBoxWarningThreeSpan');  // 更新模板库div的叉号
	
	

	function newOldDuiBi(rows) {
		upDataModleData = rows[0];
		arrLeft = [];
		arrRight = [];
		ulMySystemLeftDom.innerHTML = ''; // 左边清空 
		ulMySystemRightDom.innerHTML = ''; // 右边清空
		fengxianInput.checked=false;
		if (rows[0]) {
			var modelNum=rows[0]['产品编号'];
			var modelBan=rows[0]['版本号'];
			//if (objectModelInitString != '{}') {
				//if (objectModelInit['应用模板总数量']) {
					if(!upDataModleData['模板总数量']){
						upDataModleData['模板总数量']=0;
					}
					if(!objectModelInit['应用模板总数量']){
						objectModelInit['应用模板总数量']=0;
					}
					//console.log('11应用模板总数量:'+objectModelInit['应用模板总数量'],upDataModleData['模板总数量'])
					if (parseInt(objectModelInit['应用模板总数量']) < parseInt(upDataModleData['模板总数量'])) {
						alertBoxWarningTwoDom.style.display = 'block'; // 升级模板库就显示
						$('#loca_app_back_model').modal('hide');
						$('#loca_app_back_model_product').modal('hide');  
					} else {
						$.get('@{LatoWebApiDelegate.getProductInfoByCodeAndVersion}?code='+modelNum+'&version='+modelBan,
							function (data) {
								objectModelUpdata = JSON.parse(data);
								alertBoxWarningThreeDom.style.display = 'block';
								$('#queRenUpData').attr({'disabled':false});
								$('#queRenUpData').css('backgroundColor','gray');
								$('#queRenUpData').css('cursor','not-allowed');
								arrRight = objectModelUpdata['模板列表'].replace("[", "").replace("]", "").split(',');
								if (objectModelInit['模板列表']) {
									arrLeft = objectModelInit['模板列表'].replace("[", "").replace("]", "").split(',');   
								}
								if (arrLeft.length > 0) {
									for (var i = 0; i < arrLeft.length; i++) {
										var li = document.createElement('li');
										arrLeft[i]= arrLeft[i].replace(/^\s+|\s+$/g,'');    
										li.innerHTML = arrLeft[i];
										ulMySystemLeftDom.appendChild(li);
										li.style.fontSize = '14px';
										li.style.width = '228px';
										li.style.height = '44px';
										li.style.paddingLeft = '26px';
										li.style.lineHeight = '44px';
										li.style.color = '#373F4A';
									}
								}
			
								for (var i = 0; i < arrRight.length; i++) {
									var li = document.createElement('li');
									arrRight[i]= arrRight[i].replace(/^\s+|\s+$/g,'');
									li.innerHTML = arrRight[i];
									ulMySystemRightDom.appendChild(li);
									var str = li.innerHTML;
									var index = -1;
									if (arrLeft[0]) {
										//index = arrLeft.indexOf(str);
										index=$.inArray(str,arrLeft)
									}
									if (index == -1) {
										li.style.color = 'red';
									} else {
										li.style.color = '#373F4A';
									}
									li.style.fontSize = '14px';
									li.style.width = '228px';
									li.style.height = '44px';
									li.style.paddingLeft = '26px';
									li.style.lineHeight = '44px';
								} 
							})
							
					}

				//}
			//}


		}


	}
	
	alertBoxWarningTwoDomBtn[1].onclick = function () { // 升级模板库按钮
		agreeMbInput[0].checked = false; // 我已阅读模板更新库风险须知的input 按钮；  
		alertBoxWarningTwoDom.style.display = 'none'; // 自身的升级模板弹框div隐藏
		ulMySystemLeftDom.innerHTML = ''; // 左边清空 
		ulMySystemRightDom.innerHTML = ''; // 右边清空
		//	dataIndexInput=-1;                                // 选择的input下标为-1； 
		var url = window.location.search;
		var str = 'serviceCode';
		var index = url.indexOf(str);
		//	dataIndexInput=-1;
		if (index != -1) {
			window.location.href =
				'@{LatoWebDelegate.getLocalServerAppUpgrade(serviceCode,serverAppId,serverAppCode,serverName)}';
		} else {
			window.location.href = '"@{LatoWebDelegate.getChangeAppInfoForm(flash.应用ID,flash.全局应用ID)}";'
		}
	}

	alertBoxWarningTwoDomBtn[0].onclick = function () { // 升级模板库取消按钮
		agreeMbInput[0].checked = false; // 我已阅读模板更新库风险须知的input 按钮；  
		alertBoxWarningTwoDom.style.display = 'none'; // 自身的升级模板弹框div隐藏
		ulMySystemLeftDom.innerHTML = ''; // 左边清空 
		ulMySystemRightDom.innerHTML = ''; // 右边清空
		//dataIndexInput = -1; // 选择的input下标为-1； 
	}

	////////////////////////////// 升级模板库叉号；
	document.getElementById('alertBoxWarningTwoSpan').onclick = function () {
		agreeMbInput[0].checked = false; // 我已阅读模板更新库风险须知的input 按钮；  
		alertBoxWarningTwoDom.style.display = 'none'; // 自身的升级模板弹框div隐藏
		ulMySystemLeftDom.innerHTML = ''; // 左边清空 
		ulMySystemRightDom.innerHTML = ''; // 右边清空
		//	dataIndexInput=-1;                                // 选择的input下标为-1；
	}




    $('#fengxianInput').change(function(){
		if($(this).prop('checked')){
			$('#queRenUpData').attr('disabled',false);
		    $('#queRenUpData').css('backgroundColor','#47CD69');
			$('#queRenUpData').css('cursor','pointer');
		} else{
			$('#queRenUpData').attr('disabled',true);
		    $('#queRenUpData').css('backgroundColor','gray');
			$('#queRenUpData').css('cursor','not-allowed');
		}
	})

	
	var agreeMb = document.getElementById('agreeMb');
	var agreeMbInput = agreeMb.getElementsByTagName('input'); // 模板更新的复选框
	var ob = agreeMb.getElementsByTagName('b')[0];
	var wenzi = document.getElementById('wenzi');
	var onOff = true;
	var alertBoxWarningOneDom = document.getElementById('alertBoxWarningOne'); // 验证码整个的div
	var alertBoxWarningOneOI = alertBoxWarningOneDom.getElementsByTagName('i')[0]; //验证码整个的div里面的
	var alertBoxWarningOneSpanDom = document.getElementById('alertBoxWarningOneSpan'); // 验证码叉号
	var alertBoxWarningOneBtn = alertBoxWarningOneDom.getElementsByTagName('button') //验证码整个的div里面的button 
	var confirmCancel=document.getElementById("confirmCancel");
	var alertBoxWarningOneSpan=confirmCancel.getElementsByTagName('span');
	var yanzhengmaCodeValue = document.getElementById('yanzhengmaCode');              // 验证码输入框
	var sendVerifiCationCode=document.getElementById('sendVerifiCationCode');          // 发送验证码 
	
	ob.onclick = function (e) {
		if (onOff) {
			wenzi.style.display = 'block';
		} else {
			wenzi.style.display = 'none';
		}
		onOff = !onOff;
		e.stopPropagation();

	}
	document.onclick = function () {
		//console.log(wenzi)
		wenzi.style.display = 'none'
	}
	
//	var alertBoxWarningThreeSpanDom = document.getElementById('alertBoxWarningThreeSpan');

	alertBoxWarningThreeSpanDom.onclick = function () { // 模板库叉号
		agreeTn();
	}
	
	agreeInputBtn[0].onclick = function () { // 更新模板 取消按钮
		agreeTn();
	}

	function agreeTn(){
		agreeMbInput[0].checked = false; // 我已阅读模板更新库风险须知的input 按钮；  
		alertBoxWarningThreeDom.style.display = 'none'; // 模板库更新div隐藏
		ulMySystemLeftDom.innerHTML = ''; // 左边清空 
		ulMySystemRightDom.innerHTML = ''; // 右边清空
		//	dataIndexInput=-1;                                // 选择的input下标为-1； 
	}

	agreeInputBtn[2].onclick = function () { // 更新模板 确认更新按钮，验证码弹框就显示
		if (agreeMbInput[0].checked) {
			phoneNumber();
		}
	}

    
	function phoneNumber(){
		alertBoxWarningOneDom.style.display = 'block';
		agreeTn();
		$.get('@{LatoWebApiDelegate.getCurrentUserInfo}', function (data) {
				var str = JSON.parse(data);
				alertBoxWarningOneOI.innerHTML = str['电话'];
				window.localStorage.setItem('phone', JSON.stringify(str['电话']));
		})
	}
	 
	Date.prototype.toJSON = function () { return this.toLocaleString();}
     var strTime=JSON.stringify(new Date()).slice(1);
	var strArr=strTime.split(' ')[0].split('/');
	strArr[1]=twoStrFn(strArr[1]);
	strArr[2]=twoStrFn(strArr[2]);
	strArr=strArr.join('-');
	

	function twoStrFn(str){
        if(parseInt(str)<10){
            str='0'+str;
        }else{
            str=str;
        }
        return str;
    }

	
	
	var yanzhengmaCodeBoolean = false;
	var objIndex = {
		index: 0,
		tatol: 60,
		time: strArr
	}


	var timeFlag = null;
	
    locaFn();
	function locaFn() {
		if (localStorage.getItem('indexDataLocal'+urlData)) { // 有没有本地存储，有就获取值；这个是60和180的秒数
			var localCun = JSON.parse(localStorage.getItem('indexDataLocal'+urlData));
			if (localCun.time == objIndex.time) {
				console.log(localCun.time, objIndex.time, '本地存储和今天相等的情况1257');
			} else {
				objIndex = {
					index: 0,
					tatol: 60,
					time: strArr
				}
				window.localStorage.setItem('indexDataLocal'+urlData, {});
				window.localStorage.setItem('indexDataLocal'+urlData, JSON.stringify(objIndex));
			}
		} else { // 有没有本地存储，没有就设置；
			window.localStorage.setItem('indexDataLocal'+urlData, JSON.stringify(objIndex));
		}
	}
    
	

    var urlDataCode=urlData;
	$('#sendVerifiCationCode').click(function () {  // 验证码整个的div里面的button 获取手机的验证码
		var indexCi = 0;
		var tatolTime = 0;
		alertBoxWarningOneBtn[0].disabled = true;
		var localDate = window.localStorage.getItem('indexDataLocal'+urlData);
		
        window.localStorage.setItem(urlDataCode+'local',Date.parse(new Date()).toString().substr(0,10))     // 当前距离1970年的秒数；
		localDate = JSON.parse(localDate);
		//	console.log(localDate, '获取本地存储里面的数据1285');
		indexCi = parseInt(localDate.index);
		indexCi += 1;
		if (localDate.index < 2) {
			tatolTime = 60;
		} else if (localDate.index >= 2) {
			tatolTime = 180;
		}
		objIndex = {
			index: indexCi,
			tatol: tatolTime,
			time: strArr
		}
		window.localStorage.setItem('indexDataLocal'+urlData, JSON.stringify(objIndex));

		//	console.log(window.localStorage.getItem('indexData'))
		var daojishi = localDate.tatol;
		//console.log(daojishi, '倒计时1296');
		if (localDate.index < 2) {
			timeFlag = setInterval(function () {
				if (daojishi > 0) {
					daojishi--;
					alertBoxWarningOneBtn[0].innerHTML = daojishi + 's';
					alertBoxWarningOneBtn[0].style.background = 'rgba(55,63,74)';
					alertBoxWarningOneBtn[0].style.background = 'rgba(55,63,74,0.3)';
				} else {
					clearInterval(timeFlag);
					alertBoxWarningOneBtn[0].disabled = false;
					alertBoxWarningOneBtn[0].style.background = '#6EAF32';
					alertBoxWarningOneBtn[0].innerHTML = "请重新发送";
				}
			}, 1000)
		} else if (localDate.index >= 2) {
			timeFlag = setInterval(function () {
				if (daojishi > 0) {
					daojishi--;
					alertBoxWarningOneBtn[0].innerHTML = daojishi + 's';
					alertBoxWarningOneBtn[0].style.background = 'rgb(55,63,74)';
					alertBoxWarningOneBtn[0].style.background = 'rgba(55,63,74,0.3)';
				} else {
					clearInterval(timeFlag);
					alertBoxWarningOneBtn[0].disabled = false;
					alertBoxWarningOneBtn[0].style.background = '#6EAF32';
					alertBoxWarningOneBtn[0].innerHTML = "请重新发送";
				}
			}, 1000)

		}
		$('#alertBoxWarningOneYanzhengP').hide();
		var dataJson={
            type:'updateAppProduct'
		   }
		$.post('@{LatoWebApiDelegate.postPhoneVerifi}',dataJson, function (
			data) {
			yanzhengmaCodeBoolean = JSON.parse(data).isSend;
		})
	})

          
    var succsBoolean=false;


	alertBoxWarningOneSpanDom.onclick = function () { // 验证码叉号
		yangzhengCodeFn()
	}


	alertBoxWarningOneSpan[0].onclick = function () { // 验证码弹框，取消按钮
		yangzhengCodeFn()
	}
	
	
	alertBoxWarningOneSpan[1].onclick = function () { // 验证码弹框，确认按钮 
        yanzhengSuccsFn();
	}
    
    
    $(function(){
		$('#yanzhengmaCode').on('input propertychange change',function(){
		if(/[\u4E00-\u9FA5]/g.test($(this).val())) {
			$('#alertBoxWarningOneYanzhengP').show();
			$('#alertBoxWarningOneYanzhengP').text('请输入正确的验证码');
			return
		}if($(this).val().length !=6){
			$('#alertBoxWarningOneYanzhengP').show();
			$('#alertBoxWarningOneYanzhengP').text('请输入6位验证码');
			return
		}
		else{
			$('#alertBoxWarningOneYanzhengP').hide();
		}
	  })
	})
	



	function yangzhengCodeFn() {
		alertBoxWarningOneDom.style.display = 'none';
		arrLeft = [];
		arrRight = [];
		yanzhengmaCodeValue.value = '';
		clearInterval(timeFlag);
		timeFlag = null;
		yanzhengmaCodeBoolean = false;
		sendVerifiCationCode.innerHTML = '发送验证码';
		sendVerifiCationCode.style.backgroundColor = '#6EAF32';
		alertBoxWarningOneBtn[0].disabled = false;
		succsBoolean=false;
		document.getElementById('alertBoxWarningOneYanzhengP').style.display = 'none';
	}
	
	 
    function yanzhengSuccsFn(){
		var objSelect = SelectedTemplateData[0];
		var yzCode = yanzhengmaCodeValue.value;
		var bianhao = objSelect['产品编号'];
		var banbenhao = objSelect['版本号'];
		var newTime=Date.parse( new Date() ).toString().substr(0,10);
		
        if(newTime-window.localStorage.getItem(urlDataCode+'local')<900 && !yanzhengmaCodeValue.value){
			$('#alertBoxWarningOneYanzhengP').show();
            $('#alertBoxWarningOneYanzhengP').text('已发送过验证码,请输入');
			return
		}
		
		if((newTime-window.localStorage.getItem(urlDataCode+'local')>900 && !yanzhengmaCodeValue.value) || !window.localStorage.getItem(urlDataCode+'local')){
			$('#alertBoxWarningOneYanzhengP').show();
			$('#alertBoxWarningOneYanzhengP').text('请发送验证码');
			return
		}
		if(newTime-window.localStorage.getItem(urlDataCode+'local')>900 && yanzhengmaCodeValue.value){
			$('#alertBoxWarningOneYanzhengP').show();
			$('#alertBoxWarningOneYanzhengP').text('请发送验证码');
			return
		}
		if (yanzhengmaCodeValue.value.length==6) {
			// var dataJson = "appCode=" + urlData + "&productCode=" + bianhao + "&productVersion=" + banbenhao +
			// 	"&smsVerifi=" + yzCode;
			var dataJson={
				appCode:urlData,
				productCode:bianhao,
				productVersion:banbenhao,
				smsVerifi:yzCode
			}
			$.post('@{LatoWebApiDelegate.postAppProductChange}', dataJson, function (data) {
				var data=JSON.parse(data);
				if (data) {
					if(data.errorCode=='-1'){
						//console.log(data.errorMsg);
						var str=data.errorMsg.split(':')[0];
					   $('#alertBoxWarningOneYanzhengP').show();
                       $('#alertBoxWarningOneYanzhengP').text(str);
					}
					if(data.errorCode=='0'){
						succsBoolean=true;
						alertBoxWarningOneDom.style.display = 'none';
						$('#myAlert').show();
						$('#shujuSuccs').text(succsStr);    
						arrLeft = [];
						arrRight = [];
						yanzhengmaCodeBoolean = false;
						clearInterval(timeFlag);
						timeFlag = null;
						sendVerifiCationCode.innerHTML = '发送验证码';
						sendVerifiCationCode.style.backgroundColor = '#6EAF32';
						alertBoxWarningOneBtn[0].disabled = false;
						yanzhengmaCodeValue.value = '';
						document.getElementById('alertBoxWarningOneYanzhengP').style.display = 'none';
						var objIndex = {
							index: 0,
							tatol: 60,
							time:  strArr
						}
						window.localStorage.setItem('indexDataLocal'+urlData, JSON.stringify(objIndex));
						window.localStorage.setItem(urlDataCode+'local','');
					}
				}
			})
		}else{
			$('#alertBoxWarningOneYanzhengP').show();
			$('#alertBoxWarningOneYanzhengP').text('请输入6位验证码');
		}
	}


	$(document).keydown(function(e){
		if(e.keyCode==13&&succsBoolean){
			$('#myAlert').hide();
			succsBoolean=false;
			window.location.href=urlurl;
		}
	});

	$('#yanzhengmgSucceBtn').click(function(){
		$('#myAlert').hide();
		succsBoolean=false;
		window.location.href=urlurl;
	})
   

   $('#alertSuccessDom').click(function(){
	 $('#myAlert').hide();
	 succsBoolean=false;
	 window.location.href=urlurl;
   })
   

    var sName='${flash.应用名称}';
	window.localStorage.setItem('nameServer',sName);
	serverCode();
   function serverCode(){
		var latoMainSideA=document.getElementById('lato-main-side_a');
		var urlServerCode= window.location.href;
		var strCode='serviceCode';
		var indexCode=urlServerCode.indexOf(strCode);
        var nameServer=window.localStorage.getItem('nameServer');
        if(indexCode==-1){   // 云端
        	latoMainSideA.innerHTML='<a href="@{LatoWebDelegate.getIndexForm()}" class="list_back_a">首页</a>'+
				'<img src="@{'/public/images/vector38.png'}" >'+
				'<a href="@{LatoWebDelegate.getAppInfoFormList()}" class="list_back_a">云端应用</a>'+
				'<img src="@{'/public/images/vector38.png'}" >'+
				'<a href="@{LatoWebDelegate.getAppInfo((serverAppId!=null?serverAppId:appId),(serverAppCode!=null?serverAppCode:appCode))}">'+nameServer+'</a>'+
				'<img src="@{'/public/images/vector38.png'}" >'+
				'<a href="javascript:;" id="reloadPages" class="list_back_a">应用空间详情</a>'
		}else{  // 本地
			var urlServerName='${serverName}'
			if(encodeURIComponent(urlServerName)==encodeURIComponent(nameServer)){
				nameServer='[应用空间]'+nameServer;
				urlServerName='[服务器]'+urlServerName;
			};
        	latoMainSideA.innerHTML='<a href="@{LatoWebDelegate.getIndexForm()}" class="list_back_a">首页</a>'+
        	'<img src="@{'/public/images/vector38.png'}" >'+
				'<a href="@{LatoWebDelegate.getLocalServiceFormList()}" class="list_back_a">本地应用</a>'+
				'<img src="@{'/public/images/vector38.png'}" >'+
				'<a href="@{LatoWebDelegate.getLocalServerAppFormList(serviceCode,serverName)}" class="list_back_a">'+urlServerName+'</a>'+
				'<img src="@{'/public/images/vector38.png'}" >'+
				'<a href="@{LatoWebDelegate.getLocalServerApp(serviceCode,(serverAppId!=null?serverAppId:appId),(serverAppCode!=null?serverAppCode:appCode),serverName)}" id="kongjianmingcheng" class="list_back_a">'+nameServer+'</a>'+
				'<img src="@{'/public/images/vector38.png'}" >'+
				'<a href="javascript:;" id="reloadPages" class="list_back_a">应用空间详情</a>'
        }
   }

   $('#reloadPages').click(function(){
		history.go(0) 
	})

	var queRenUpDataDom=document.getElementById('queRenUpData');
	
	queRenUpData.onmouseover=function(){
		
		if(fengxianInput.checked==true){
			//alert(1)
			this.style.backgroundColor='rgb(89,210,120)';
			this.style.color='#fff';
			this.style.border='none'
		}
	}
	queRenUpData.onmouseout=function(){
		if(fengxianInput.checked==true){
			//alert(1)
			this.style.backgroundColor='rgb(69,191,102)';
			this.style.color='#fff';
			this.style.border='none'
		}
	}
     


	// #{if serviceCode}
    //     <a href="@{LatoWebDelegate.getLocalServerApp(serviceCode,(serverAppId!=null?serverAppId:appId),(serverAppCode!=null?serverAppCode:appCode),serverName)}">应用空间详情</a>
    //     #{/if}
    //     #{else}
	// 	   <a href="@{LatoWebDelegate.getAppInfo((serverAppId!=null?serverAppId:appId),(serverAppCode!=null?serverAppCode:appCode))}">应用空间详情</a>
    //     #{/else}
	 
	// var btn_cancel=document.getElementById('btn_cancel');

	// btn_cancel.onmouseout=function(){
	// 	this.style.backgroundColor='#ffffff';
	// 	this.style.border='1px solid #22cb64';
	// 	this.style.color='red';
	// }

   

	function closeModel(){
		$('#loca_app_back_model').modal('hide');
		$('#loca_app_back_model_product').modal('hide');
		$('#loca_app_back_model_history').modal('hide');
	 }
	 
	var oldTimestr1 = "${flash.到期时间}";
	 oldTimestr1=oldTimestr1.replace(/-/g,'/');
	var oldTimestr2 = Date.parse(new Date(oldTimestr1));
	var oldTimestr3 = oldTimestr2/ 1000;
	var newTimestr=Date.parse(new Date())/1000;
	var timeDifference=oldTimestr3-newTimestr; 


     $("#activeoThree").click(function(){
		
		   if(timeDifference<0){
		  	$('#giveMoneyAlert').show();
		   }else{
			 window.location.href="@{LatoWebDelegate.getLocalServerAppUpgrade(serviceCode,serverAppId,serverAppCode,serverName)}";
			                       
		 }
	 })


	 $('#giveMoneyAlertCancel').on('click',function(){
		$('#giveMoneyAlert').hide()
	 })

	 $('#giveMoneyAlertSpan').on('click',function(){
		$('#giveMoneyAlert').hide()
	 })
	 
	  
	
	 


</script>































<style>

   a:hover{
	   color: #FFFFFF;
   }

   #activeoThree{
	   background-color: #FB5040!important;
   }
   
   #activeoTwo:hover{
	background-color: rgb(78,213,131)!important;
	 color: #FFFFFF; 
   }
   #activeoTwo:active{
	background-color: rgb(69,191,102)!important;
	 color: #FFFFFF; 
   }

 
   #activeoThree:hover{
	background-color: #ee210e!important;
	 color: #FFFFFF; 
   }
  #activeoThree:active{
	background-color: #bb493f!important;
	 color: #FFFFFF!important; 
   }
	
 

   

	#btnSuccessNext{
		border: none!important;
		outline: none!important;
		color: #fff!important;
		background-color: rgb(34,203,100);
		text-align: center;
	}



	#btnSuccessNext:hover{
		color: #fff;
		background-color: rgb(78,213,131);
	}
	#btnSuccessNext:active{
		border: none!important;
		outline: none!important;
		color: #fff!important;
		background-color: rgb(69,191,102)!important;
		text-align: center;
	}
	.modal-footer .btn{
		border: none!important;
		outline: none!important;
		color: #fff!important;
		background-color: #22cb64 !important;
		text-align: center;
	}
	
	.modal-footer .btn:hover{
		border: none!important;
		outline: none!important;
		color: #fff!important;
		text-decoration: none;
		background-color: rgb(78,213,131);
	}
	.modal-footer .btn:active{
		border: none!important;
		outline: none!important;
		color: #fff!important;
		text-decoration: none;
		background-color: rgb(69,191,102);
	}
   
    #alertBoxWarningThree #agreeBtn #queRenCalData:hover{
		background-color: rgb(89,210,120);
		border: none!important;
		color: #fff!important;
		line-height: 40px!important;
	}
	
    #alertBoxWarningThree #agreeBtn #queRenCalData:active{
		background-color: rgb(69,191,102)!important;
		border: none!important;
		color: #fff!important;
		line-height: 40px!important;
	}
/* 
    #alertBoxWarningThree #agreeBtn #queRenUpData:hover{
		background-color:#6EAF32!important;
		border: none!important;
		color: #fff!important;
		line-height: 40px!important;
	}
*/
	
	#alertBoxWarningThree #agreeBtn #queRenUpData:active{
		background-color: rgb(69,191,102)!important;
		border: none;
		color: #fff;
		line-height: 40px!important;
	}  

	.alertBoxWarningOne{
		display: none;
	}
	/* ,#alertBoxWarningOne .ConfirmCancel .btn2:hover */
	/* ,#alertBoxWarningOne .ConfirmCancel .btn2:active, */
	 #alertBoxWarningOne .ConfirmCancel .btn1:hover{
		background-color:rgb(89,210,120)!important;;
		border: none;
		color: #fff;
	    
	}
	#alertBoxWarningOne .ConfirmCancel .btn2:hover{
		background-color:rgb(89,210,120)!important;
		border: none;
		color: #fff;
	}
	#alertBoxWarningOne .ConfirmCancel .btn1:active{
		background-color: rgb(69,191,102)!important;
		border: none;
		color: #fff;
	}
	#alertBoxWarningOne .ConfirmCancel .btn2:active{
		background-color: rgb(69,191,102)!important;
		border: none;
		color: #fff;
	}
    #myAlert .alertBoxWarningT #yanzhengmgSucceBtn:hover{
		background-color:rgb(89,210,120)!important;;
		border: none;
		color: #fff;
		line-height: 40px!important;
	}
	#myAlert .alertBoxWarningT #yanzhengmgSucceBtn:active{
		background-color: rgb(69,191,102)!important;
		border: none;
		color: #fff;
		line-height: 40px!important;
	}
	#alertBoxWarningOne .ConfirmCancel .btn2:active{
		background-color: rgb(69,191,102)!important;
		border: none;
		color: #fff;
	}
    
	#queRenCalData{
		border: none;
		border: 1px solid rgba(55, 63, 74, 0.6);
		font-size: 14px;
		box-sizing: border-box;
		border-radius: 4px;
		width: 120px;
		height: 40px;
		display: inline-block;
		line-height: 40px;
		margin-right: 44px;
		margin-top: 0px;
		cursor: pointer;
		background-color: #FFFFFF;color: #373F4A;
		position: absolute;
		left:166px;
	}
     #queRenUpData{
        border: none; 
		box-sizing: border-box;
		border-radius: 4px;
		background-color:  rgb(110,175,50);
		width: 120px;
		font-size: 14px;
		height: 40px;
		display: inline-block;
		line-height: 40px;
		cursor: pointer;
		margin-top: 0px;color: #FFFFFF; 
		position: absolute;
		left: 440px;
	 }
	  #agreeBtn p{
		  position: relative;
		  width: 725px;
	  }  

	  #alertBoxWarningOne .ConfirmCancel .btn1, #alertBoxWarningOne .ConfirmCancel .btn2{
			width: 74px;
			height: 32px;
			line-height: 32px;
			display: inline-block;
			margin-top: 8px;
			border-radius: 4px;
			border: none;
			border: 1px solid rgb(55, 63, 74);
			border: 1px solid rgba(55, 63, 74, 0.6);
			border-radius: 4px;
			background: #FFFFFF;
			margin-left: 0px;
			font-size: 14px;
			text-align: center;
			cursor: pointer;
			color: #373F4A;
			position: absolute;
	  }
	  #confirmCancel{
		  width:500px;
	  } 

	  #alertBoxWarningOne .ConfirmCancel .btn1{
		   left:318px;
		   color: #373F4A;
		   border: 1px solid rgb(55, 63, 74);
		   border: 1px solid rgba(55, 63, 74, 0.3);
		   color: rgba(55, 63, 74, 0.8);
	  }
      #alertBoxWarningOne .ConfirmCancel .btn2{
		   left: 408px;
		   background-color: #47CD69;
           color: #fff;
		   border: none;
	  }

	  #loca_app_back_model_history .modal-header>span {
			right:-30px;
		}
		#alertBoxWarningThree #agreeBtn #queRenCalData:hover{
		background-color: rgb(89,210,120);
		border: none;
		color: #fff;
	}
	
    #alertBoxWarningThree #agreeBtn #queRenCalData:active{
		background-color: rgb(69,191,102);
		border: none;
		color: #fff;
	}

    #alertBoxWarningThree #agreeBtn #queRenUpData:hover{
		background-color: rgb(89,210,120);
		border: none;
		color: #fff;
	}

	
	#alertBoxWarningThree #agreeBtn #queRenUpData:active{
		background-color: rgb(69,191,102)!important;
		border: none;
		color: #fff;
	} 
	
	#alertBoxWarningOne .ConfirmCancel .btn1:hover,#alertBoxWarningOne .ConfirmCancel .btn2:hover{
		background-color: rgb(89,210,120);
		border: none;
		color: #fff;
	}
	#alertBoxWarningOne .ConfirmCancel .btn1:active,#alertBoxWarningOne .ConfirmCancel .btn2:active,
	#myAlert .alertBoxWarningT #yanzhengmgSucceBtn:active{
		background-color: rgb(69,191,102);
		border: none;
		color: #fff;
	}




	#btnSuccessCance{
		border: none!important;
		outline: none!important;
		color: rgba(55, 63, 74, 0.8)!important;
		background-color:#fff!important;
		font-size: 10px;
		text-align: center;
		width: 46px;
		height: 26px;
		line-height: 15px;
		border: 1px solid rgba(55, 63, 74, 0.3)!important;
	}

	#btnSuccessCance:hover{
		border: none!important;
		outline: none!important;
		color: #fff!important;
		background-color: rgb(89,210,120)!important;
	}
	#btnSuccessCance:active{
		border: none!important;
		outline: none!important;
		color: #fff!important;
		background-color: rgb(69,191,102)!important;
		text-align: center;
	}
  
	#btnSuccessNext{
		border: none!important;
		outline: none!important;
		color: #fff!important;
		height: 26px!important;
		font-size: 10px;
		background-color:#47CD69!important;
		text-align: center!important;
		border-radius: 4px;
		margin-left: 10px;
	}

	#btnSuccessNext:hover{
		color: #fff;
		background-color: rgb(89,210,120);
	}
	#btnSuccessNext:active{
		border: none!important;
		outline: none!important;
		color: #fff!important;
		background-color: rgb(69,191,102);
		text-align: center;
	}
    .detail_text {
		line-height: 27px;
	}
    
#giveMoneyAlert {
    position: fixed;
    left: 0;
    top: 0;
    width: 100%;
    background: rgba(55, 63, 74, 0.3);
    z-index: 10000000;
    height: 100%;
    text-align: center;
}
#giveMoneyAlert .alertBoxWarningT {
    padding-left: 20px;
    padding-right: 20px;
    width: 500px;
    height: 258px;
    background-color: rgb(255, 255, 255);
    border-radius: 4px;
    position: fixed;
    left: 0;
    right: 0;
    z-index: 10000000000000000000;
    top: 20%;
    margin: auto;
}
#giveMoneyAlert #giveMoneyAlertSpan {    
    cursor: pointer;
    font-size: 25px;
    position: absolute;
    right: 16px;
    top: 16px;
    transform: rotate(45deg);
    width: 20px;
    height: 20px;
    border-radius: 50%;
}
#shujuSuccsMoney {
    font-size: 18px;
    font-style: normal;
    font-weight: 700;
    color: #373F4A;
    margin-bottom: 10px;
    margin-top: 20px;
}
#giveMoneyAlert .alertBoxWarningT #succsImgMoney {  
    border-radius: 50%;
    margin-left: auto;
    margin-top: 60px;
}
#giveMoneyAlert .alertBoxWarningT  {
    font-size: 18px;
    font-style: normal;
    font-weight: 700;
    color: #373F4A;
    margin-bottom: 10px;
    margin-top: 20px;
}
#giveMoneyAlert .alertPWarning .btn1 {
	border: none;
	border: 1px solid rgb(55, 63, 74);
    border: 1px solid rgba(55, 63, 74, 0.6);
    font-size: 14px;
    box-sizing: border-box;
    border-radius: 4px;
    width: 120px;
    height: 40px;
    margin-right: 16px;
    margin-top: 0px;
    background-color: #FFFFFF;
    color: rgba(55, 63, 74, 0.8);
	font-weight: 900;
	border: 1px solid rgb(55, 63, 74);
	border: 1px solid rgba(55, 63, 74, 0.3);
}
	
#giveMoneyAlert .alertPWarning .btn2 {
    width: 120px;
    height: 40px;
    font-style: normal;
    font-family: 'PingFang SC';
    font-weight: normal;
    left: 192px;
    top: 191px;
    text-align: center;
    font-size: 14px;
    background-color: #47CD69;
    color: #FFFFFF;
    border-radius: 5px;
    border: none;
	display: block;
	margin-right: 0px;
	font-weight: 900;
}

#giveMoneyAlert .alertPWarning .btn1:hover {
    background-color: rgb(89,210,120);
    border: none;
    color: #fff;
}
#giveMoneyAlert .alertPWarning .btn1:active {
    background-color: rgb(69,191,102);
    border: none;
    color: #fff;
}
#giveMoneyAlert .alertPWarning .btn2:hover {
    background-color: rgb(89,210,120);
    border: none;
    color: #fff;
}
#giveMoneyAlert .alertPWarning .btn2:active {
    background-color: rgb(69,191,102);
    border: none;
    color: #fff;
}
.menu_name_app{
	width: 133px;
}



#alertBoxWarningThree{
	/* background-color: rgb(195,198,201); */
	 /* display: block; */
    -webkit-transition: opacity .15s linear;
    -o-transition: opacity .15s linear;
    transition: opacity .15s linear; 
}
#alertBoxWarningThreeSpan{
	color: rgb(104,109,113);
}

#alertBoxWarningOne .messageCode #yanzhengmaCode{
	margin-right: 3px;
	color: #373F4A;
	border:none;
}


#alertBoxWarningOne .messageCode input {
    font-size: 14px;
    line-height: 21px;
    padding-left: 3px;
    font-family: 'PingFang SC';
    float: left;
    margin-right: 12px;
	border: none;
	color: rgb(195,198,201);
}

#agreeMb span{
	color: rgb(95,101,110);
	color: rgba(55, 63, 74);
	color: rgba(55, 63, 74, 0.8);
}

#spaceName{
	width: 350px;
	height: 30px;
	line-height: 20px;
}

.detail_text_picTureOne,.detail_text_picTureTwo {
    /* width: 263px; */
    /* height: 30px; */
    margin-left: 14px;
    padding-left: 12px;
    /* float: left; */
    line-height: 30px;
	color: #373F4A;
	/* width: 614px; */
	line-height: 18px;
	margin-left: -1px;
	padding-left: 0;
	padding-top: 5px;
	max-height: 50px;
	display: inline-block;
	overflow: auto;
}

#spacePictureOne,#spacePictureTwo{
   width: 614px;
   height: 50px;
}

.body_menu1 .editPic{
	width: 16px;
	height: 16px;
	margin-top: 5px;
}

#spaceNameLableOne,#detail_text_picTureOne,#detail_text_picTureTwo{
	padding-top: 5px;
	max-width: 614px;
	max-height: 50px;
	overflow: auto;
}

.detail_text1 {
    margin-left: 14px;
    padding-left: 12px;
    float: left;
    line-height: 30px;
	color: #373F4A;
	line-height: 17px;
}


.bottomProduct  .detail_product{
	height: 30px;
	line-height: 30px;
	width:106px;
	background: #22cb64;
	border-radius: 4px;
	color: white;
	font-family: 'Microsoft YaHei';
	font-style: normal;
	font-weight: normal;
	font-size: 14px;
	text-align: center;
	padding-left: 0px;
	margin-left:10px;
	display: inline-block;
	cursor: pointer;
}

#proudectHistory{
	display: inline-block;
}
#proudectHistory:hover{
	background-color: rgb(89,210,120)!important;
    border: none;
    color: #fff;
}
#proudectHistory:active{
	background-color: rgb(69,191,102)!important;
    border: none;
    color: #fff;
}

#textPrompt{
	color: #FB5040;
}
#activeoTwo {
    background-color: #22cb64!important;
    color: #FFFFFF;
}
.btu_postpone {
    display: block;
    width: 106px;
    height: 32px;
    color: #fff;
    line-height: 32px;
    text-align: center;
    background: #22cb64;
    box-shadow: 0 0px 0px rgba(255,255,255,0);
    border-radius: 4px;
    margin-top: 6px;
    float: left;
}

.btu_upgrade {
    display: block;
    width: 106px;
    height: 32px;
    color: #fff;
    line-height: 32px;
    text-align: center;
    background: #FB5040;
    box-shadow: 0 6px 6px rgba( 255,255,255,0);
    border-radius: 4px;
    margin-top: 6px;
    float: left;
}

#chanpinNumber{
	max-height: 60px;
	width: 614px;
	line-height: 18px;
}
.localServer_appInfo .localServer_appInfo_agreeBtn_spanOne{
	left: 166px;
}

   
#queRenNext{
	position: absolute;left: 302px;line-height: 40px;cursor: pointer;}

.localServer_appInfo .localServer_appInfo_agreeBtn_spanThree{
	left: 438px;
}

#upDataModel{
	margin-top: 20px;
}
#giveMoneyAlert .alertPWarning .btn2{
	display: inline-block;
}


</style>







#{/set}
