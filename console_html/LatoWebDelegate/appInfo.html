#{extends 'LatoWebDelegate/mainServicesList.html' /}
#{set title:'云表应用信息' /}
#{set appInfo:'true' /}
#{set returnLinkLable:'返回应用空间列表' /}
#{set 'returnLink'}
@{LatoWebDelegate.getAppInfoFormList()}
#{/set}
#{set 'latoMainSide'}

<script src="@{'/public/javascripts/1.0/clipboard.min.js'}"></script>

<div class="lato-main-side appInfo_main_side" id="appInfo_main_side">
	<div id="lato-main-side_a">
		<a href="@{LatoWebDelegate.getIndexForm()}" class="list_back_a">首页</a>
		<img src="@{'/public/images/vector38.png'}">
		<a href="@{LatoWebDelegate.getAppInfoFormList()}" class="list_back_a">云端应用</a>
		<img src="@{'/public/images/vector38.png'}" >
		<a href="@{LatoWebDelegate.getAppInfo((serverAppId!=null?serverAppId:appId),(serverAppCode!=null?serverAppCode:appCode))}" id="reloadPages_name" class="list_back_a">${flash.应用名称}</a>
		<img src="@{'/public/images/vector38.png'}" >
		<a href="javascript:;" id="reloadPages" class="list_back_a">应用空间详情</a>
	</div>


    <!-- 开始的主页面 -->
	<div class="main_body appInfo_main_body">
		<div class="body_name body_menu1 clearfix appinfo_main_one">
			<label class="menu_name appinfo_main_oneLable">云表应用信息</label>
		</div>
			<div class="body_name body_menu1 clearfix appinfo_main_two">
				<label class="menu_name">应用名称</label>
				<label  class="detail_text1" id="spaceNameLableOne">${flash.应用名称}</label>
				<img class="editPic" src="@{'/public/images/bianji.png'}" id="spaceNameSpan" >
				<input type="text" id="spaceName">
                <span id="textPrompt">请输入最大为40位数的应用名称</span>
			</div>
			<div class="body_name body_menu1 clearfix appinfo_main_three">
				<label class="menu_name">应用ID</label>
				<label class="detail_text">${flash.应用ID}</label>
			</div>
			<!-- <div class="body_name body_menu1 clearfix" style="margin-top: 18px;">
				<label class="menu_name">产品名称</label>
				<label class="detail_text">${flash.产品名称}</label>
			</div> -->
        <div class="body_menu1_yingyong" >
			<div class="body_name body_menu1 clearfix appinfo_main_four">
				<label class="menu_name">用户数</label>
				<label class="detail_text">${flash.用户数}</label>
			</div>
			
			<div class="body_name body_menu1 clearfix appinfo_main_fourBottom">
				<label class="menu_name appinfo_main_fourLableT">模板数</label>
				<label class="detail_text">${flash.模板数}</label>
			</div>
	
	
	   </div>

	<div class="body_menu1_yingyong">
		
		<div class="body_name body_menu1 clearfix appinfo_main_fourBottom">
			<label class="menu_name">空间容量&nbsp;(G)</label>
			<label class="detail_text appinfo_main_fourBottomOne">${flash.附件容量} </label>
			<!-- <div class="servercode" style="margin-left:286px">
				(单位:G) <span style="color:red"></span>
			</div> -->
		</div>
		
		<div class="body_name body_menu1 clearfix appinfo_main_fourBottom">
			<label class="menu_name appinfo_main_four_spaceT" >已使用空间&nbsp;(M)</label>
			<label class="detail_text appinfo_main_four_spaceB">${flash.已使用空间容量}</label>
			<!-- <div class="servercode" style="margin: auto;">
				(单位:M) <span style="color:red"> 延迟24小时同步更新</span>
			</div> -->
		</div>

	</div>	
	
	<!-- <div class="body_menu1_yingyong">	 -->
		
			<div class="body_name body_menu1 clearfix appinfo_main_five">
				<label class="menu_name">到期时间</label>
				<label class="detail_text">${flash.到期时间}</label>
			</div>
	<!-- </div> -->
		
	<!-- class="detail_text add_text" -->
		<div class="body_name body_menu1 clearfix appinfo_main_six">  
			<div class="addressLeft">
				<label class="menu_name">访问地址</label>
				<label class="menu_name_url">
					${flash.应用访问地址}	
				</label>
		    </div>
			<div class="servercode">
				<div id="btn" class="js-copy appinfo_js_copy" data-clipboard-text="${flash.应用访问地址}">
					<!-- <button class="add_copy" onclick="" style="width:70px;height: 30px;text-align: center;padding-right: 10px;">复制</button> -->
					<img class="add_copy appinfo_add_copy" id="copy_text" onclick="" src="@{'/public/images/026fuzhi.png'}" >
					<!-- <img src="@{'/public/images/copy_text.png'}" style="width:58px;height:39px;background: #877a7a;margin-top: 6px;"> -->
					<span id="copyImg_https">复制</span>
				</div>
			</div>
		</div>

		<!-- <div class="body_menu1_yingyong"> -->
		<div class="body_name body_menu1 clearfix appinfo_body_name_seven">
			<label class="menu_name">广告横幅链接</label>
			<label class="detail_text_picTureOne" id="detail_text_picTureOne">${flash.横幅图片链接}</label>
		    <img class="editPic" src="@{'/public/images/bianji.png'}" id="spaceUrlOne">
			<textarea id="spacePictureOne"></textarea>
		</div>
		<div class="body_name body_menu1 clearfix appinfo_body_name_sevenB">
			<label class="menu_name">应用图标链接</label>
			<label class="detail_text_picTureTwo" id="detail_text_picTureTwo">${flash.图标图片链接}</label>
		    <img class="editPic" src="@{'/public/images/bianji.png'}" id="spaceUrlTwo"> 
			<textarea id="spacePictureTwo"></textarea> 
		</div>
	<!-- </div> -->

	<div class="body_name body_menu1 menu_btnlist clearfix appinfo_body_eight">
		<ul class="de_btn_list">
			<!-- <li style="width: 120px;"><a class="de_anzhaung" style="padding-right: 0px;width: 120px;display: block;"
					href="@{LatoWebDelegate.getUpdateAppInfo(flash.全局应用ID,'',flash.应用ID,flash.全局应用ID)}">设置</a></li>  -->
			<li><a class="de_anzhaung de_anzhuangOne"
					href="@{LatoWebDelegate.getAppInfoFormPostpone(flash.应用ID,flash.全局应用ID)}">续费</a></li>
					<li id="upgradeModel">升级</li>
			<!-- <li id="upgradeModel" style="width: 120px;"><a class="de_anzhaung" style="padding-right: 0px;"
					href="@{LatoWebDelegate.getChangeAppInfoForm(flash.应用ID,flash.全局应用ID)}">升级</a></li> -->
			<!-- <li><a class="de_anzhaung" id="productInstall" name="productInstall" style="visibility:visible" href="@{LatoWebDelegate.getInstallCloudsProduct(flash.产品名称,flash.应用ID,flash.电话,flash.全局应用ID,flash.应用名称)}"> 产品安装 </a></li> -->
			<!-- <li style="width: 120px;"><a class="de_anzhaung" style="padding-right: 0px;"
				
					href="@{LatoWebDelegate.getAppBackup(flash.产品名称,flash.应用ID,flash.电话,flash.全局应用ID,flash.应用名称)}">模板库备份</a>
			</li> -->
			<li><a class="de_anzhaung de_anzhang_two" href="@{LatoWebDelegate.getResetAppPwd(flash.应用ID,flash.全局应用ID)}">重置应用密码</a>
			</li>
			<li>
				<a class="de_anzhaung" id="modelBenfen" href="@{LatoWebDelegate.getAppBackup(flash.产品名称,flash.应用ID,flash.电话,flash.全局应用ID,flash.应用名称)}">模板库备份</a>
			</li>
		</ul>
	</div> 
           


		<hr class="appInfo_hr"/>
		<label class="menu_name" id="appinfo_anzh">已安装产品（模板库）</label>
	<div id="InstalledProduct">
	
		<div class="body_name body_menu1 clearfix appinfo_body_nine">
			
			<label class="menu_name_app">产品名称</label>
			<label class="detail_text_picTureTwo" id="chanpinName" ></label> 
		</div>
		<div class="body_name body_menu1 clearfix appinfo_body_ten">
		
			<label class="menu_name_app">产品描述</label>
			<label class="detail_text_picTureTwo" id="chanpinNumber">
				
			</label> 
		</div>
		<div class="body_name body_menu1 clearfix appinfo_body_eleven">
			<label class="menu_name_app">安装时间</label>
			<label class="detail_text_picTureTwo" id="chanTime"></label> 
		</div>
	</div>
	
		<div class="bottomProduct">    
			    <span class="detail_text" data-toggle="modal" id="detailTextImport" data-target="#loca_app_back_model_product" data-toggle="modal">导入产品</span>
				<span data-toggle="modal" data-target="#loca_app_back_model" data-toggle="modal" id="proudectChongzhuang">更新</span>
				<span data-toggle="modal" data-target="#loca_app_back_model_history" data-toggle="modal"  id="proudectHistory">&nbsp;&nbsp;历史版本</span>
			</div>
	</div>
</div>    

	<!-- href="javascript:window.open('@{LatoWebDelegate.getAppBackup(flash.产品名称,flash.应用ID,flash.电话,flash.全局应用ID,flash.应用名称)}' )">模板库备份</a> -->

	<!-- 历史记录模态框弹框 -->
	<div class="modal fade appinfo_model_history" id="loca_app_back_model_history" tabindex="-1" role="dialog"
		aria-labelledby="loca_app_back_model" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<div class="modal-header">
						<span onclick="closeModel()">+</span>  
						<button type="button" class="close" data-dismiss="modal" aria-hidden="true">
						</button>
						<h4 class="modal-title" id="loca_app_back_model1">
							<span id="errorTypeSpan1">历史版本模板库</span>
						</h4> 
					</div>
				</div>
				<!-- data-url= -->
				<div class="modal-body">
					<!-- data-url="@{LatoWebDelegate.getJsonData('软件产品版本信息','查询允许更换的产品信息列表(产品编号)')}" -->
					<table data-toggle="table" id="app_back_table_history" name="localServer" data-click-to-select="true"
						data-header-style="headerStyle" data-search="true"
						data-select-item-name="radioName">
						<thead>
							<tr>
								<th data-field="产品名称" data-halign="center" data-align="center">产品名称</th>
								<th data-field="产品编号" data-halign="center" data-align="center">产品编号</th>
								<th data-field="版本描述" data-halign="center" data-align="center">描述</th>
								<th data-field="版本号" data-halign="center" data-align="center">版本号</th>
								<th data-field="更新时间" data-halign="center" data-align="center">更新时间</th>
							</tr>
						</thead>
					</table>
					<table id="mytab" class="table table-hover"></table>
				</div>
				<div class="modal-footer">
					<button type="button" class="canle_model"  data-dismiss="modal">取消
					</button>
				</div>
			</div>
		</div>
	</div>
	<!-- class="btn btn-lato" -->
	<!-- data-header-style="headerStyle"  data-click-to-select=true data-only-info-pagination=true
	data-pagination-loop=true data-page-size=10 data-select-item-name="radioName" data-pagination=true
	
-->

	<!-- 更新模板模态框弹框需要有编号 -->
	<div class="modal fade appinfo_bianhao" id="loca_app_back_model" tabindex="-1" role="dialog" aria-labelledby="loca_app_back_model"
		aria-hidden="true">
		<div class="modal-dialog" style="width:60%">
		
			<div class="modal-content">
				<div class="modal-header">
					<span onclick="closeModel()">+</span>  
					<button type="button" class="close" data-dismiss="modal" aria-hidden="true">
					</button>
					<h4 class="modal-title" id="loca_app_back_model">
						<span id="errorTypeSpan">请选择相应的模板库</span>
					</h4>
				</div>
				<!-- data-url= -->
				<div class="modal-body">
					<!-- data-url="@{LatoWebDelegate.getJsonData('软件产品版本信息','查询允许更换的产品信息列表(产品编号)')}" -->
					<table data-toggle="table" id="app_back_table" name="localServer" data-click-to-select="true"
						data-header-style="headerStyle" data-search="true" data-pagination="true"
						data-select-item-name="radioName">
						<thead>
							<tr>
								<th data-field="lato_state" data-radio="true" data-formatter="stateFormatter"></th>
								<th data-field="产品编号" data-halign="center" data-align="center">产品编号</th>
								<th data-field="产品名称" data-halign="center" data-align="center">产品名称</th>
								<th data-field="模板总数量" data-halign="center" data-align="center">模板总数量</th>
								<th data-field="版本号" data-halign="center" data-align="center">版本号</th>
								<th data-field="是否开源" data-halign="center" data-align="center">是否开源</th>
								<th data-field="私有产品" data-halign="center" data-align="center">私有产品</th>
								<th data-field="支持二次发布" data-halign="center" data-align="center">支持二次发布</th>
								<th data-field="发布时间" data-halign="center" data-align="center">发布时间</th>
							</tr>
						</thead>
					</table>
				</div>

				<div class="modal-footer">
					<button type="button" class="btn btn-lato" id="btnSuccessCance" data-dismiss="modal">取消
					</button>
					<button type="button"  id="btnSuccessNext" onclick="selectProdct()">下一步</button>
				</div>
			</div>
		</div>
	</div>

	
	<!-- class="btn btn-primary" -->

	<!-- 更新模板库没有编号，产品导入的模态框 -->

	<div class="modal fade appinfo_daoru" id="loca_app_back_model_product" tabindex="-1" role="dialog"
		aria-labelledby="loca_app_back_model" aria-hidden="true">
		<div class="modal-dialog" style="width:60%">
			
			<div class="modal-content">
				<div class="modal-header">
					<span onclick="closeModel()">+</span>
					<button type="button" class="close" data-dismiss="modal" aria-hidden="true">
					</button>
					<h4 class="modal-title" id="loca_app_back_model">
						<span id="errorTypeSpan" style="color: #373F4A;">请选择相应的模板库</span>
					</h4>
				</div>
				<!-- data-url= -->
				<div class="modal-body">
					<!-- data-url="@{LatoWebDelegate.getJsonData('软件产品版本信息','查询允许更换的产品信息列表(产品编号)')}" -->
					<table data-toggle="table" id="app_back_table_product" name="localServer" data-click-to-select="true"
						data-header-style="headerStyle" 
						data-select-item-name="radioName">
						<thead>
							<tr>
								<th data-field="lato_state" data-radio="true" data-formatter="stateFormatter"></th>
								<th data-field="产品编号" data-halign="center" data-align="center">产品编号</th>
								<th data-field="产品名称" data-halign="center" data-align="center">产品名称</th>
								<th data-field="模板总数量" data-halign="center" data-align="center">模板总数量</th>
								<th data-field="版本号" data-halign="center" data-align="center">版本号</th>
								<th data-field="是否开源" data-halign="center" data-align="center">是否开源</th>
								<th data-field="私有产品" data-halign="center" data-align="center">私有产品</th>
								<th data-field="支持二次发布" data-halign="center" data-align="center">支持二次发布</th>
								<th data-field="发布时间" data-halign="center" data-align="center">发布时间</th>
							</tr>
						</thead>
					</table>
				</div>

<!--data-click-to-select="true" data-header-style="headerStyle" data-search="true"
						data-pagination="true" data-select-item-name="radioName"-->

				<div class="modal-footer">
					<button type="button" class="canle_model" data-dismiss="modal">取消
					</button>
					<button type="button"  id="btnSuccessNext_productImport" onclick="selectProdctProduct()">下一步</button>
				</div>
			</div>
		</div>
	</div>




	<!--  模板库更新弹框 更新前 更新后 -->
	<div class="alertBoxWarningThree appinfo_upDate" id="alertBoxWarningThree">
		 
	    <div class="upDateTop"></div>

		<div class="alertBoxWarningTh">
			<div class="title">
				模板库更新
			</div>
			<span id="alertBoxWarningThreeSpan">+</span>

			<div class="content">

				<div class="left">

					<div class="titleTop">
						<i></i>
						<span>更新前</span>
					</div>

					<div class="mySystem">
						<ul id="ulMySystemLeft">
						</ul>
					</div>



				</div>



				<div class="rigth">
					<div class="titleTop">
						<i></i>
						<span>更新后</span>
					</div>

					<div class="mySystem">
						<ul id="ulMySystemRight">

						</ul>
					</div>
				</div>


			</div>

			<div class="agree" id="agreeMb">

				<!-- <input type="checkbox" name="checkbox" />&nbsp;&nbsp;<span>更新为<i style="color: red;font-style: normal;">不可逆</i>行为，请谨慎操作</span><br /> -->
				<input id="fengxianInput" type="checkbox"
					name="checkbox" />
				<span>我已阅读<b id="updataAgreeModel" class="active">《模板库更新风险须知》</b>,
					了解并愿意承担本次操作的风险</span>
				<div id="wenzi" class="wenzi">
					<p class="p1">模板库更新风险须知</p>
					<p class="p2">
						1、模版库更新操作不可逆,被修改的模版，将无法恢复。<br />
						2、【确认更新】后,原模版库的同名模版将被覆盖，不同名的模版将保留。<br />
						3、更新后的模版数不能超过模版数上限。 <br />
						4、更新不影响该模版下的表单数据。<br />
						5、云表平台(珠海乐图软件有限公司)不对模版库更新中人为操作导致的后果负责。<br />
					</p>
					<p class="p3"></p>
				</div>

			</div>

			<div id="agreeBtn">
				<p>
					<button id="queRenCalData" class="btn1">取消</button>
					<button id="queRenNext" class="btn1">上一步</button>
					<button id="queRenUpData" class="btn2">确认更新</button>
				</p>

			</div>



		</div>


	</div>

	<!-- 警告框二 立即升级模板库 -->

	<div class="alertBoxWarningTwo" id="alertBoxWarningTwo">
        <div class="upDateTop"></div>   
		<div class="alertBoxWarningT">
			<span id="alertBoxWarningTwoSpan">+</span>

			<!-- <p 
				background: url('') no-repeat;"></p> -->
			<img src="@{'/public/images/Group36.png'}">
			<p>当前模板数不足，请升级应用空间后再试</p>

			<p class="alertPWarning" style="margin-top: 20px;">
				<button class="btn1">取消</button>
				<button class="btn2">立即升级</button>
			</p>
		</div>

	</div>





	<!-- 输入验证码的弹框 -->
	<div class="alertBoxWarning" id="alertBoxWarningOne">
		<div class="upDateTop"></div>
		<div class="alertBoxOne">
			<span id="alertBoxWarningOneSpan">+</span>

			<div class="title">
				<p class="p1">
					<!-- <span style="background: url('/public/images/Rectangle350.png') no-repeat;
						width: 4px;
						height: 20px;"></span> -->
					<img src="@{'/public/images/Rectangle350.png'}">
					<span></span>
				</p>
				<p class="p2">当前操作不可逆,请谨慎执行</p>
				<p class="p3">我们将发送短信验证至<i>133****2345</i>以确保是您本人操作</p>
			</div>
			<div class="messageCode">
				<!-- <span background: url('/public/images/163.png') no-repeat"></span> -->
				<img src="@{'/public/images/163.png'}">
				<input id="yanzhengmaCode" type="text" />
				<button id="sendVerifiCationCode">发送验证码</button>
			</div>
			<p id="alertBoxWarningOneYanzhengP">请输入验证码</p>
			<!-- <img src="@{'/public/images/163.png'}" style="width: 90px;"> -->
			<div class="ConfirmCancel">
				<button class="btn1">取消</button>
				<button class="btn2">确认</button>
			</div>
		</div>
	</div>

	<!-- 短信发送成功后升级成功后的弹框 -->
	 <div class="contentRight" id="myAlert">
		<div class="upDateTop"></div>
		<div class="alertBoxWarningT">
			<span id="alertSuccessDom">+</span>
			<div id="succsImg"> 
				<!-- <div class="succsImgChild" style="margin:15px auto;width: 4px; height: 27px;border: 1px solid transparent;">
					<span style="display: block;width: 4px;height: 20px;background-color:white;margin-bottom: 2px;margin-top:13px"></span>
					<span style="display: block;width: 4px;height: 4px;background-color: white;"></span>
				 </div> -->
				 <img src="@{'/public/images/succsImg.png'}">
			</div>
			<p id="shujuSuccs">数据提交成功</p>
			<button id="yanzhengmgSucceBtn" >确认</button>
		</div>

	</div>

	
   <!-- 点击升级按钮欠费弹框 -->
    <div class="alertBoxWarningTwo" id="giveMoneyAlert">
		<div class="upDateTop"></div>
		<div class="alertBoxWarningT">
			<span id="giveMoneyAlertSpan">+</span>
			 <div id="succsImgMoney"> 
			<!-- <p   
				background: url('') no-repeat;"></p> -->
			<img src="@{'/public/images/Group36.png'}">
			</div>
			<p id="shujuSuccsMoney">您当前应用已欠费，请续费后再试</p>

			<p class="alertPWarning">
				<button class="btn1">取消</button>
				<a class="btn2"
				href="@{LatoWebDelegate.getAppInfoFormPostpone(flash.应用ID,flash.全局应用ID)}">立即续费</a>
				
			</p>
		</div>

	</div>
	
	
	

</div>



</div>

<script type="text/javascript">
	
	var btn = document.getElementById('btn');
	
	
	$(document).ready(function () {
		//	console.log('${flash}');
		var productName = '${flash.产品名称}';
		if (productName.length < 1) {
			var queryDevice = document.getElementById("productInstall");
			queryDevice.style.visibility = "hidden";
		}

		$('#sub-item-2').addClass('in');
		
		
	});

	function postAjax(jsonDate){
	    console.log(jsonDate)      // @{LatoWebDelegate.putForm('updateAppForm')}
		$.post("@{LatoWebDelegate.putForm('updateAppForm')}",jsonDate,function(data){
			var data=JSON.parse(data);
			console.log(data,527)
		})
    }

	
	// 应用空间名称更改
$('#spaceNameSpan').on('click',function(){
	$(this).hide();
	var textStr=$('#spaceNameLableOne').text();
	$('#spaceName').val(textStr); 
	$('#spaceNameLableOne').hide();
	$('#spaceName').show();
	$('#spaceName').focus();
})
// fengxianInput
$('#spaceName').on('blur',function(){
         if($('#spaceName').val().length>40){
		 $('#textPrompt').show();
		 return
	 }else{
	  $('#textPrompt').hide(); 
          var textStrOne=$('#spaceName').val();
	  var jsonDate={
		lato_global_app_id:'${appCode}',
		lato_app_name: textStrOne,
		lato_app_banner_url:$('#detail_text_picTureOne').text(),
		lato_app_icon_url:$('#detail_text_picTureTwo').text()
	   }
	  $('#spaceNameLableOne').show();
	  $('#spaceName').hide();
	  $('#spaceNameLableOne').text(textStrOne); 
	  $('#spaceNameSpan').show();
	  window.localStorage.setItem('nameServer',textStrOne);
	 // $('#reloadPages_name').text(textStrOne);
	    postAjax(jsonDate);
    }
})


$("#spaceName").on("input propertychange", function() {
            var text = $("#spaceName").val();
			var textlen = $("#spaceName").val().length;
			
            if(textlen>40){
				$('#textPrompt').show();
              //  var lenText=text.substring(0,10)
              //  $("#spaceName").val(lenText)
            }else{
				$('#textPrompt').hide();
			}
});

// 横幅图片链接更改
 $('#spaceUrlOne').on('click',function(){
	$(this).hide();
	 var textStr=$('#detail_text_picTureOne').text();
	 textStr=textStr.replace(/^\s+|\s+$/g,'')
	 $('#spacePictureOne').val(textStr);
	 $('#detail_text_picTureOne').hide();
	 $('#spacePictureOne').show();
	 $('#spacePictureOne').focus();
 })
  

 $('#spacePictureOne').on('blur',function(){
	var textStrOne=$('#spacePictureOne').val();
	 var jsonDate={
		lato_global_app_id:'${appCode}',
		lato_app_name: $("#spaceNameLableOne").text(),
		lato_app_banner_url:textStrOne,
		lato_app_icon_url:$('#detail_text_picTureTwo').text()
	 }
	 $('#detail_text_picTureOne').text(textStrOne);
	 $('#spacePictureOne').val(textStrOne);
	 $('#detail_text_picTureOne').show();
	 $('#spaceUrlOne').show();
	 $('#spacePictureOne').hide();
	 postAjax(jsonDate);
 })

  
 // 图标图片链接更改
 $('#spaceUrlTwo').on('click',function(){
	$(this).hide();
	 var textStr=$('#detail_text_picTureTwo').text();
	 textStr=textStr.replace(/^\s+|\s+$/g,'')
	 $('#spacePictureTwo').val(textStr);
	 $('#detail_text_picTureTwo').hide();
	 $('#spacePictureTwo').show();
	 $('#spacePictureTwo').focus();

 })
  


 $('#spacePictureTwo').on('blur',function(){
	var textStrOne=$('#spacePictureTwo').val();
	 var jsonDate={
		lato_global_app_id:'${appCode}',
		lato_app_name: $("#spaceNameLableOne").text(),
		lato_app_banner_url:$('#detail_text_picTureOne').text(),
		lato_app_icon_url:textStrOne
	 }
	 $('#detail_text_picTureTwo').text(textStrOne);
	 $('#spacePictureTwo').val(textStrOne);
	 $('#detail_text_picTureTwo').show();
	 $('#spaceUrlTwo').show();
	 $('#spacePictureTwo').hide();
	 postAjax(jsonDate);
 })



	
	var sName='${flash.应用名称}';
   //console.log('${flash.应用名称}',sName,'487localStorage');
	window.localStorage.setItem('nameServer',sName);


	//var urlData = location.search.slice(1).split('&')[1].split('=')[1];
	var urlData='${appCode}'
	//console.log(urlData,121)  // e1dc1009-7ddf-4533-8a40-3199fde2d9c7
	var nameNumber = null;
	var alertBoxWarningTwoDom = document.getElementById('alertBoxWarningTwo'); // 模板库升级div
	var alertBoxWarningTwoDomBtn = alertBoxWarningTwoDom.getElementsByTagName('button'); // 模板库升级取消和立即升级按钮
	var objectModelInitString = null; // 判断初始化数据是否有值
	var objectModelInit = '';         // ajaxuser() 的JSON.parse(xhr.responseText);值后面再更新前后需要用到
	var SelectedTemplateData = null;  // 选择更新模板的数组,这个值是最新,被选中的那个值
	var urlurl = window.location.href;
	$('#InstalledProduct').hide();
	$('#detailTextImport').hide();
	ajaxuser();
   
	function ajaxuser() {
		$.get('@{LatoWebApiDelegate.getAppProductInfo}?appCode=' + urlData, function (data) {
			if (data) {
				objectModelInitString = data;
				var responseJson = JSON.parse(data);
				console.log(responseJson,734)
				//SelectedTemplateData=[responseJson];
				var nameProduct = responseJson.产品名称;
				nameNumber = responseJson.产品编号;
				var nameTime=responseJson.发布时间;
				var banbenmiaoshu=responseJson.版本描述;
				if (!nameNumber) {
					$('#detailTextImport').show();
					$('#InstalledProduct').hide();   
					$('#proudectHistory').hide();
					$('#proudectChongzhuang').hide();
				} else {
					$('#detailTextImport').hide();         // detailTextImport
					$('#InstalledProduct').show(); 
					$('#proudectHistory').show();
					$('#proudectChongzhuang').show();
					$("#chanpinName").text(nameProduct);
					if(banbenmiaoshu){
						$("#chanpinNumber").text(banbenmiaoshu);
					}
					$('#chanTime').text(nameTime);
				}
				objectModelInit = responseJson;
			}
		})
	}



    	// 模态框出现之前，把选中的取消
	$('#loca_app_back_model').on('show.bs.modal', function () {
		$("#app_back_table").bootstrapTable('uncheckAll');
	})

	// 模态框出现之前，把选中的取消
	$('#loca_app_back_model_product').on('show.bs.modal', function () {
		$("#app_back_table_product").bootstrapTable('uncheckAll');
	})
	

	var succsStr = '产品导入成功';
	var chooseModel=true;
	
	// 产品更新按钮
	$('#proudectChongzhuang').on('click', function () {
		succsStr = '产品更新成功';
		chooseModel=true;
	    importProductNum();
		//$('#loca_app_back_model').modal('show');
		//$('#loca_app_back_model_product').modal('hide');
	})

	$('#detailTextImport').on('click', function () {
		succsStr = '产品导入成功';
		chooseModel=false;
		importProduct();
	})


	
	
	
    //上一步按钮
	$('#queRenNext').on('click', function () {
		$('#alertBoxWarningThree').hide();
		$("#fengxianInput").prop("checked",false);
		if(chooseModel){
			
			importProductNum();
			$('#loca_app_back_model').modal('show');
		}else{
			importProduct(); 
			$('#loca_app_back_model_product').modal('show');
		}
	})
	


	// 模态框出现之前，把选中的取消
	$('#loca_app_back_model').on('show.bs.modal', function () {
		$("#app_back_table").bootstrapTable('uncheckAll');
	})

	// 模态框出现之前，把选中的取消
	$('#loca_app_back_model_product').on('show.bs.modal', function () {
		$("#app_back_table_product").bootstrapTable('uncheckAll');
	})
	
	

	// 历史记录模态框
	$('#proudectHistory').on('click',function(){
		tableHistory();
	})


	function tableHistory(){
		$('#app_back_table_history').bootstrapTable('destroy');
		$('#app_back_table_history').bootstrapTable({
			url: '@{LatoWebDelegate.getJsonData("应用产品更换","查询更新产品列表(应用唯一值)")}?%E5%BA%94%E7%94%A8%E5%94%AF%E4%B8%80%E5%80%BC=' +
		    urlData,
		    pagination: true,
		    pageSize:10,
		    onlyInfoPagination: false,
        	queryParamsType: "",
	        queryParams:  function  (params) {
	            return {pageSize: params.pageSize, pageNumber: params.pageNumber};
	        },
		});
	}
	
		
     



	// 产品升级模态框+编号
	function importProductNum(){
		console.log("名称值："+nameNumber)
	//	let url = '@{LatoWebDelegate.getJsonData("软件产品版本信息","查询允许更换的产品信息列表(产品编号)")}?%E4%BA%A7%E5%93%81%E7%BC%96%E5%8F%B7='+nameNumber
		$('#app_back_table').bootstrapTable('destroy');
		$('#app_back_table').bootstrapTable({
			url: '@{LatoWebDelegate.getJsonData("软件产品版本信息","查询允许更换的产品信息列表(产品编号)")}?%E4%BA%A7%E5%93%81%E7%BC%96%E5%8F%B7='+nameNumber,
				pagination: true,
				pageSize:10,
				onlyInfoPagination: false,
				queryParamsType: "",
				queryParams:  function  (params) {
					return {pageSize: params.pageSize, pageNumber: params.pageNumber};
				}
		});
	}


     
    
     
     
   // 产品导入模态框 
	function importProduct(){
		$('#app_back_table_product').bootstrapTable('destroy');
		$('#app_back_table_product').bootstrapTable({
			url: '@{LatoWebDelegate.getJsonData("软件产品版本信息","查询允许更换的产品信息列表(产品编号)")}',
			pagination: true,
			pageSize:10,
			onlyInfoPagination: false,
			queryParamsType: "",
			queryParams:  function  (params) {
				return {pageSize: params.pageSize, pageNumber: params.pageNumber};
			},
			
		});
	}
	// loca_app_back_model app_back_table  loca_app_back_model_product  app_back_table_product 

	// 下一步有产品编号
	function selectProdct() {
		rowNewSelect = null;
		var row = $("#app_back_table").bootstrapTable('getSelections');
		SelectedTemplateData = row;
		if (row.length > 0) {
			$('#loca_app_back_model').modal('hide');
			$('#loca_app_back_model_product').modal('hide');
			newOldDuiBi(row);
		}
	}

	// 下一步产品导入
	function selectProdctProduct() {
		rowNewSelect = null;
		var row = $("#app_back_table_product").bootstrapTable('getSelections');
		SelectedTemplateData = row;

		if (row.length > 0) {
			$('#loca_app_back_model').modal('hide');
			$('#loca_app_back_model_product').modal('hide');
			newOldDuiBi(row);
		}
	}

	var objectModelUpdata = null; // 根据获取指定产品的信息接口获取的objectModelUpdata = JSON.parse(xhr.responseText)的值
	//	var SelectedTemplateData = null;                                               // 选择更新模板的数组,这个值是最新的值；这个值在发送验证码的时候需要用到，产品编号和版本号
	var upDataModleData = null; // 选择更新模板的数组, 和上面的SelectedTemplateData一样
	var alertBoxWarningThreeDom = document.getElementById('alertBoxWarningThree'); //模板库更新前后的div
	var ulMySystemLeftDom = document.getElementById('ulMySystemLeft'); //模板库更新左边的ul
	var ulMySystemRightDom = document.getElementById('ulMySystemRight'); //模板库更新右边的ul 
	var arrLeft = []; // 左边数组里面的值
	var arrRight = []; // 右边数组里面的值

	var agreeMb = document.getElementById('agreeMb'); // 我已阅读《模板库更新风险须知》的父级
	var agreeMbInput = agreeMb.getElementsByTagName('input'); // 模板更新的复选框
	var ob = agreeMb.getElementsByTagName('b')[0]; //《模板库更新风险须知》 按钮
	var wenzi = document.getElementById('wenzi'); // 显示文字div
	var onOff = true; // 文字显示和隐藏的div
	var agreeBtnDom = document.getElementById('agreeBtn'); // 确认更新div  
	var agreeInputBtn = agreeBtnDom.getElementsByTagName('button'); // 确认更新button
	var alertBoxWarningThreeSpanDom = document.getElementById('alertBoxWarningThreeSpan'); // 更新模板库div的叉号



	function newOldDuiBi(rows) {
		upDataModleData = rows[0];
		arrLeft = [];
		arrRight = [];
		ulMySystemLeftDom.innerHTML = ''; // 左边清空 
		ulMySystemRightDom.innerHTML = ''; // 右边清空
		if (rows[0]) {
			var modelNum = rows[0]['产品编号'];
			var modelBan = rows[0]['版本号'];
			//if (objectModelInitString != '{}') {
			//if (objectModelInit['应用模板总数量']) {
			if (!upDataModleData['模板总数量']) {
				upDataModleData['模板总数量'] = 0;
			}
			if (!objectModelInit['应用模板总数量']) {
				objectModelInit['应用模板总数量'] = 0;
			}
			//console.log('11应用模板总数量:'+objectModelInit['应用模板总数量'],upDataModleData['模板总数量'])
			if (parseInt(objectModelInit['应用模板总数量']) < parseInt(upDataModleData['模板总数量'])) {
				alertBoxWarningTwoDom.style.display = 'block'; // 升级模板库就显示
				$('#loca_app_back_model').modal('hide');
				$('#loca_app_back_model_product').modal('hide');
			} else {
				$.get('@{LatoWebApiDelegate.getProductInfoByCodeAndVersion}?code=' + modelNum + '&version=' + modelBan,
					function (data) {
						objectModelUpdata = JSON.parse(data);
						alertBoxWarningThreeDom.style.display = 'block';
						$('#queRenUpData').attr('disabled', false);
						$('#queRenUpData').css('backgroundColor', 'gray');
						$('#queRenUpData').css('cursor', 'not-allowed');
						arrRight = objectModelUpdata['模板列表'].replace("[", "").replace("]", "").split(',');
						if (objectModelInit['模板列表']) {
							arrLeft = objectModelInit['模板列表'].replace("[", "").replace("]", "").split(',');
						}
						if (arrLeft.length > 0) {
							for (var i = 0; i < arrLeft.length; i++) {
								var li = document.createElement('li');
								arrLeft[i]=arrLeft[i].replace(/^\s+|\s+$/,"");
								li.innerHTML = arrLeft[i];
								ulMySystemLeftDom.appendChild(li);
								li.style.fontSize = '14px';
								li.style.width = '228px';
								li.style.height = '44px';
								li.style.paddingLeft = '26px';
								li.style.lineHeight = '44px';
								li.style.color = '#373F4A';
							}
						}
						for (var i = 0; i < arrRight.length; i++) {
							var li = document.createElement('li');
							arrRight[i]= arrRight[i].replace(/^\s+|\s+$/g,'');
							li.innerHTML = arrRight[i];
							ulMySystemRightDom.appendChild(li);
							var str = li.innerHTML;
							var index = -1;
							if (arrLeft[0]) {
								//index = arrLeft.indexOf(str);
								index=$.inArray(str,arrLeft);
							}
							if (index == -1) {
								li.style.color = 'red';
							} else {
								li.style.color = '#373F4A';
							}
							li.style.fontSize = '14px';
							li.style.width = '228px';
							li.style.height = '44px';
							li.style.paddingLeft = '26px';
							li.style.lineHeight = '44px';
						}
					})
			}
		}


	}


	// alert('${flash.应用ID}');
	// alert('${flash.全局应用ID}')
	alertBoxWarningTwoDomBtn[1].onclick = function () { // 升级模板库按钮
		agreeMbInput[0].checked = false; // 我已阅读模板更新库风险须知的input 按钮；  
		alertBoxWarningTwoDom.style.display = 'none'; // 自身的升级模板弹框div隐藏
		ulMySystemLeftDom.innerHTML = ''; // 左边清空 
		ulMySystemRightDom.innerHTML = ''; // 右边清空
		//	dataIndexInput=-1;                                // 选择的input下标为-1； 
		var url = window.location.search;
		var str = 'serviceCode';
		var index = url.indexOf(str);
		//	dataIndexInput=-1;
		if (index != -1) {
			window.location.href =
				'@{LatoWebDelegate.getLocalServerAppUpgrade(serviceCode,serverAppId,serverAppCode,serverName)}';
		} else {
			window.location.href = '@{LatoWebDelegate.getChangeAppInfoForm(flash.应用ID,flash.全局应用ID)}'
		}
	}

	alertBoxWarningTwoDomBtn[0].onclick = function () { // 升级模板库取消按钮
		agreeMbInput[0].checked = false; // 我已阅读模板更新库风险须知的input 按钮；  
		alertBoxWarningTwoDom.style.display = 'none'; // 自身的升级模板弹框div隐藏
		ulMySystemLeftDom.innerHTML = ''; // 左边清空 
		ulMySystemRightDom.innerHTML = ''; // 右边清空
		//dataIndexInput = -1; // 选择的input下标为-1； 
	}

	////////////////////////////// 升级模板库叉号；
	document.getElementById('alertBoxWarningTwoSpan').onclick = function () {
		agreeMbInput[0].checked = false; // 我已阅读模板更新库风险须知的input 按钮；  
		alertBoxWarningTwoDom.style.display = 'none'; // 自身的升级模板弹框div隐藏
		ulMySystemLeftDom.innerHTML = ''; // 左边清空 
		ulMySystemRightDom.innerHTML = ''; // 右边清空
		//	dataIndexInput=-1;                                // 选择的input下标为-1；
	}






	$('#fengxianInput').change(function(){
		if($(this).prop('checked')){
			$('#queRenUpData').attr('disabled',false);
		    $('#queRenUpData').css('backgroundColor','#47CD69');
			$('#queRenUpData').css('cursor','pointer');
		} else{
			$('#queRenUpData').attr('disabled',true);
		    $('#queRenUpData').css('backgroundColor','gray');
			$('#queRenUpData').css('cursor','not-allowed');
		}
	})
	
	


	var agreeMb = document.getElementById('agreeMb');
	var agreeMbInput = agreeMb.getElementsByTagName('input'); // 模板更新的复选框
	var ob = agreeMb.getElementsByTagName('b')[0];
	var wenzi = document.getElementById('wenzi');
	var onOff = true;
	var alertBoxWarningOneDom = document.getElementById('alertBoxWarningOne'); // 验证码整个的div
	var alertBoxWarningOneOI = alertBoxWarningOneDom.getElementsByTagName('i')[0]; //验证码整个的div里面的
	var alertBoxWarningOneSpanDom = document.getElementById('alertBoxWarningOneSpan'); // 验证码叉号
	var alertBoxWarningOneBtn = alertBoxWarningOneDom.getElementsByTagName('button') //验证码整个的div里面的button 
	var yanzhengmaCodeValue = document.getElementById('yanzhengmaCode'); // 验证码输入框
	var sendVerifiCationCode = document.getElementById('sendVerifiCationCode'); // 发送验证码 
	
	$("#updataAgreeModel").on('click',function(){
		if(onOff){
			$('#wenzi').show();
		}else{
			$('#wenzi').hide();
		};
		onOff = !onOff;
		return false;
	})


	document.onclick = function () {
		//console.log(wenzi)
		wenzi.style.display = 'none'
	}

	var alertBoxWarningThreeSpanDom = document.getElementById('alertBoxWarningThreeSpan');

	alertBoxWarningThreeSpanDom.onclick = function () { // 模板库叉号
		agreeTn();
	}

	agreeInputBtn[0].onclick = function () { // 更新模板 取消按钮
		agreeTn();
	}

	function agreeTn() {
		agreeMbInput[0].checked = false; // 我已阅读模板更新库风险须知的input 按钮；  
		alertBoxWarningThreeDom.style.display = 'none'; // 模板库更新div隐藏
		ulMySystemLeftDom.innerHTML = ''; // 左边清空 
		ulMySystemRightDom.innerHTML = ''; // 右边清空
		//	dataIndexInput=-1;                                // 选择的input下标为-1； 
	}

	agreeInputBtn[2].onclick = function () { // 更新模板 确认更新按钮，验证码弹框就显示
		if (agreeMbInput[0].checked) {
			phoneNumber();
		}
	}

	

	function phoneNumber() {
		alertBoxWarningOneDom.style.display = 'block';
		agreeTn();
		$.get('@{LatoWebApiDelegate.getCurrentUserInfo}', function (data) {
			var str = JSON.parse(data);
			alertBoxWarningOneOI.innerHTML = str['电话'];
			window.localStorage.setItem('phone', JSON.stringify(str['电话']));
		})
	}

	Date.prototype.toJSON = function () { return this.toLocaleString();}
	var strTime=JSON.stringify(new Date()).slice(1);
	console.log(strTime.split(' '),1072)
	var strArr=strTime.split(' ')[0].split('/');
	strArr[1]=twoStrFn(strArr[1]);
	strArr[2]=twoStrFn(strArr[2]);
	strArr=strArr.join('-');
	

	function twoStrFn(str){
        if(parseInt(str)<10){
            str='0'+str;
        }else{
            str=str;
        }
        return str;
    }


	var yanzhengmaCodeBoolean = false;
	var objIndex = {
		index: 0,
		tatol: 60,
		time:strArr  // var s=new Date(); var s1=s.getFullYear()+'-'+(s.getMonth()+1)+'-'+s.getDate();
	}
	
	//console.log(objIndex.time,1007)

	var timeFlag = null;

	locaFn();

	function locaFn() {
		if (localStorage.getItem('indexDataAppInfo' + urlData)) { // 有没有本地存储，有就获取值；这个是60和180的秒数
			var localCun = JSON.parse(localStorage.getItem('indexDataAppInfo' + urlData));
			if (localCun.time == objIndex.time) {
				console.log(localCun.time, objIndex.time, '本地存储和今天相等的情况1257');
			} else {
				objIndex = {
					index: 0,
					tatol: 60,
					time: strArr
				}
				window.localStorage.setItem('indexDataAppInfo' + urlData, {});
				window.localStorage.setItem('indexDataAppInfo' + urlData, JSON.stringify(objIndex));
			}
		} else { // 有没有本地存储，没有就设置；
			window.localStorage.setItem('indexDataAppInfo' + urlData, JSON.stringify(objIndex));
		}
	}



	var urlDataCode = urlData;
	$('#sendVerifiCationCode').click(function () {   // 验证码整个的div里面的button 获取手机的验证码
		var indexCi = 0;
		var tatolTime = 0;
		//console.log(1128)
		 alertBoxWarningOneBtn[0].disabled = true;
		var localDate = window.localStorage.getItem('indexDataAppInfo' + urlData);
		window.localStorage.setItem(urlDataCode+'AppInfo', Date.parse(new Date()).toString().substr(0, 10)) // 当前距离1970年的秒数；
		localDate = JSON.parse(localDate);
		//	console.log(localDate, '获取本地存储里面的数据1285');
		indexCi = parseInt(localDate.index);
		indexCi += 1;
		if (localDate.index < 2) {
			tatolTime = 60;
		} else if (localDate.index >= 2) {
			tatolTime = 180;
		}
		objIndex = {
			index: indexCi,
			tatol: tatolTime,
			time: strArr
		}
		window.localStorage.setItem('indexDataAppInfo' + urlData, JSON.stringify(objIndex));

		//	console.log(window.localStorage.getItem('indexData'))
		var daojishi = localDate.tatol;
		//console.log(daojishi, '倒计时1296');
		if (localDate.index < 2) {
			timeFlag = setInterval(function () {
				if (daojishi > 0) {
					daojishi--;
					alertBoxWarningOneBtn[0].innerHTML = daojishi + 's';
					console.log($('#sendVerifiCationCode'));
					$('#sendVerifiCationCode').css({'background':'#ddd','color':'#373F4A'})
					// alertBoxWarningOneBtn[0].style.background = 'rgb(55,63,74)';
					// alertBoxWarningOneBtn[0].style.background = 'rgba(55,63,74,0.3)';
				} else {
					clearInterval(timeFlag);
					 alertBoxWarningOneBtn[0].disabled = false;
					// alertBoxWarningOneBtn[0].style.background = '#6EAF32';
					$('#sendVerifiCationCode').css({'background':'#47CD69','color':'#fff'});
					alertBoxWarningOneBtn[0].innerHTML = "请重新发送";
				}
			}, 1000)
		} else if (localDate.index >= 2) {
			timeFlag = setInterval(function () {
				if (daojishi > 0) {
					daojishi--;
					alertBoxWarningOneBtn[0].innerHTML = daojishi + 's';
					$('#sendVerifiCationCode').css({'background':'#ddd','color':'#373F4A'})
					// alertBoxWarningOneBtn[0].style.background = 'rgb(55,63,74)';
					// alertBoxWarningOneBtn[0].style.background = 'rgba(55,63,74,0.3)';
				} else {
					clearInterval(timeFlag);
					alertBoxWarningOneBtn[0].disabled = false;
					// alertBoxWarningOneBtn[0].disabled = false;
					// alertBoxWarningOneBtn[0].style.background = '#6EAF32';
					$('#sendVerifiCationCode').css({'background':'#47CD69','color':'#fff'});
					alertBoxWarningOneBtn[0].innerHTML = "请重新发送";
				}
			}, 1000)
		}

		$('#alertBoxWarningOneYanzhengP').hide();
		var dataJson={
            type:'updateAppProduct'
		   }
		$.post('@{LatoWebApiDelegate.postPhoneVerifi}', dataJson, function (
			data) {
			yanzhengmaCodeBoolean = JSON.parse(data).isSend;
		})


	})


	var succsBoolean = false;


	alertBoxWarningOneSpanDom.onclick = function () { // 验证码叉号
		yangzhengCodeFn()
	}

  
	alertBoxWarningOneBtn[1].onclick = function () { // 验证码弹框，取消按钮

		yangzhengCodeFn()

	}


	alertBoxWarningOneBtn[2].onclick = function () { // 验证码弹框，确认按钮 
		yanzhengSuccsFn();
	}


	$(function () {
		$('#yanzhengmaCode').on('input propertychange change', function () {
			if ($(this).val().length != 6) {
				$('#alertBoxWarningOneYanzhengP').show();
				$('#alertBoxWarningOneYanzhengP').text('请输入6位验证码');
			} else {
				$('#alertBoxWarningOneYanzhengP').hide();
			}
		})
	})


	function yangzhengCodeFn() {
		alertBoxWarningOneDom.style.display = 'none';
		arrLeft = [];
		arrRight = [];
		yanzhengmaCodeValue.value = '';
		clearInterval(timeFlag);
		timeFlag = null;
		yanzhengmaCodeBoolean = false;
		sendVerifiCationCode.innerHTML = '发送验证码';
		// sendVerifiCationCode.style.backgroundColor = '#47CD69';
		$('#sendVerifiCationCode').css({'background':'#47CD69','color':'#fff'});
		alertBoxWarningOneBtn[0].disabled = false;
		succsBoolean = false;
		document.getElementById('alertBoxWarningOneYanzhengP').style.display = 'none';
	}


	function yanzhengSuccsFn() {
		var objSelect = SelectedTemplateData[0];
		var yzCode = yanzhengmaCodeValue.value;
		var bianhao = objSelect['产品编号'];
		var banbenhao = objSelect['版本号'];
		var newTime = Date.parse(new Date()).toString().substr(0, 10);

		if (newTime - window.localStorage.getItem(urlDataCode+'AppInfo') < 900 && !yanzhengmaCodeValue.value) {
			$('#alertBoxWarningOneYanzhengP').show();
			$('#alertBoxWarningOneYanzhengP').text('已发送过验证码,请输入');
			return
		}

		if ((newTime - window.localStorage.getItem(urlDataCode+'AppInfo') > 900 && !yanzhengmaCodeValue.value) || !window.localStorage.getItem(urlDataCode+'AppInfo')) {
			$('#alertBoxWarningOneYanzhengP').show();
			$('#alertBoxWarningOneYanzhengP').text('请发送验证码');
			return
		}
		if ((newTime - window.localStorage.getItem(urlDataCode+'AppInfo') > 900 && yanzhengmaCodeValue.value)) {
			$('#alertBoxWarningOneYanzhengP').show();
			$('#alertBoxWarningOneYanzhengP').text('请发送验证码');
			return
		}
		if (yanzhengmaCodeValue.value.length == 6) {
			// var dataJson = "appCode=" + urlData + "&productCode=" + bianhao + "&productVersion=" + banbenhao +
			// 	"&smsVerifi=" + yzCode;
            var dataJson={
				appCode:urlData,
				productCode:bianhao,
				productVersion:banbenhao,
				smsVerifi:yzCode
			}
			$.post('@{LatoWebApiDelegate.postAppProductChange}', dataJson, function (data) {
				var data = JSON.parse(data);
				if (data) {
					if (data.errorCode == '-1') {
						//console.log(data.errorMsg,1022);
						var str = data.errorMsg.split(':')[0];
						$('#alertBoxWarningOneYanzhengP').show();
						$('#alertBoxWarningOneYanzhengP').text(str);
					}
					if (data.errorCode == '0') {
						succsBoolean = true;
						alertBoxWarningOneDom.style.display = 'none';
						$('#myAlert').show();
						$('#shujuSuccs').text(succsStr);
						arrLeft = [];
						arrRight = [];
						yanzhengmaCodeBoolean = false;
						clearInterval(timeFlag);
						timeFlag = null;
						sendVerifiCationCode.innerHTML = '发送验证码';
						sendVerifiCationCode.style.backgroundColor = '#47CD69';
						alertBoxWarningOneBtn[0].disabled = false;
						yanzhengmaCodeValue.value = '';
						document.getElementById('alertBoxWarningOneYanzhengP').style.display = 'none';
						var objIndex = {
							index: 0,
							tatol: 60,
							time: strArr
						}
						window.localStorage.setItem('indexDataAppInfo' + urlData, JSON.stringify(objIndex));
						window.localStorage.setItem(urlDataCode+'AppInfo', '');
					}
				}
			})
		} else {
			$('#alertBoxWarningOneYanzhengP').show();
			$('#alertBoxWarningOneYanzhengP').text('请输入6位验证码');
		}
	}


	$(document).keydown(function (e) {
		if (e.keyCode == 13 && succsBoolean) {
			$('#myAlert').hide();
			succsBoolean = false;
			window.location.href = urlurl;
		}
	});

	$('#yanzhengmgSucceBtn').click(function () {
		$('#myAlert').hide();
		succsBoolean = false;
		window.location.href = urlurl;
	})


	$('#alertSuccessDom').click(function () {
		$('#myAlert').hide();
		succsBoolean = false;
		window.location.href = urlurl;
	})
	



	$('#reloadPages').click(function(){   // 这个是应用空间详情的点击刷新页面  我只是搞了一个点击事件  我想用 a=href"@{LatoWebDelegate.getAppInfoFormList()}" 代替
		history.go(0) 
	})

	
	
	$("#copy_text").hover(function() {
		$("#copyImg_https").show();
     },function() {
	    $("#copyImg_https").hide();
     });

     function closeModel(){
		$('#loca_app_back_model').modal('hide');
		$('#loca_app_back_model_product').modal('hide');
		$('#loca_app_back_model_history').modal('hide');
	 }
	 
	 //  giveMoneyAlert	#giveMoneyAlertSpan   .btn1
     
	 var giveMoneyAlert=document.getElementById('giveMoneyAlert');
	
	 var giveMoneyAlertButton=giveMoneyAlert.getElementsByTagName('button');
	 
	 
	 
	 giveMoneyAlertButton[0].onclick=function(){
		giveMoneyAlert.style.display='none';
	 }
	 
	  
	 $('#giveMoneyAlertSpan').click(function(){
		 $('#giveMoneyAlert').hide();
	 })


	 var oldTimestr1 = "${flash.到期时间}";
	 oldTimestr1=oldTimestr1.replace(/-/g,'/');
	 var oldTimestr2 = Date.parse(new Date(oldTimestr1));
	 var oldTimestr3 = oldTimestr2/ 1000;
	 var newTimestr=Date.parse(new Date())/1000;
	 var timeDifference=oldTimestr3-newTimestr; 
	
	 $('#giveMoneyAlert').show();
     $("#upgradeModel").click(function(){
		   if(timeDifference<0){
		  	$('#giveMoneyAlert').show();
		  }else{
			 window.location.href="@{LatoWebDelegate.getChangeAppInfoForm(flash.应用ID,flash.全局应用ID)}";
		 }
	 })

	
    // $('#alertBoxWarningThree').css({"opacity":"0.3"});



	 var clipboard = new Clipboard(btn); //实例化
    
	//复制成功执行的回调，可选
	clipboard.on('success', function (e) {
		alert('复制成功');
	});

	//复制失败执行的回调，可选
	clipboard.on('error', function (e) {
		alert('复制失败');
	});







</script>


<style>

 #giveMoneyAlert {
position: fixed;
left: 0;
top: 0;
display: none; 
width: 100%;

background: rgba(55, 63, 74, 0.3);
z-index: 10000000;
height: 100%;
text-align: center;
}
 #giveMoneyAlert .alertBoxWarningT {
padding-left: 20px;
padding-right: 20px;
width: 500px;
height: 258px;
background-color: rgb(255, 255, 255);
border-radius: 4px;
position: fixed;
left: 0;
right: 0;
z-index: 10000000000000000000;
top: 20%;
margin: auto;
}
 #giveMoneyAlert #giveMoneyAlertSpan {    
cursor: pointer;
font-size: 25px;
position: absolute;
right: 16px;
top: 16px;
transform: rotate(45deg);
width: 20px;
height: 20px;
border-radius: 50%;
}



 #giveMoneyAlert .alertBoxWarningT #succsImgMoney {  
border-radius: 50%;
margin-left: auto;
margin-top: 60px;
margin-bottom: 25px;
}
 #giveMoneyAlert .alertBoxWarningT  {
font-size: 18px;
font-style: normal;
font-weight: 700;
color: #373F4A;
margin-bottom: 10px;
margin-top: 20px;
}
 #giveMoneyAlert .alertPWarning .btn1 {
border: none;
border: 1px solid rgb(55, 63, 74);
border: 1px solid rgba(55, 63, 74, 0.6);
font-size: 14px;
box-sizing: border-box;
border-radius: 4px;
width: 120px;
height: 40px;
margin-right: 16px;
margin-top: 0px;
background-color: #FFFFFF;
color: rgb(55, 63, 74);
color: rgba(55, 63, 74, 0.8);
font-weight: 900;
border: 1px solid rgba(55, 63, 74);
border: 1px solid rgba(55, 63, 74, 0.3);
}

 #giveMoneyAlert .alertPWarning .btn2 {
width: 120px;
height: 40px;
font-style: normal;
font-family: 'PingFang SC';
font-weight: normal;
left: 192px;
top: 191px;
text-align: center;
font-size: 14px;
background-color: #47CD69;
color: #FFFFFF;
border-radius: 5px;
border: none;
margin-right: 0px;
font-weight: 900;
}

 #giveMoneyAlert .alertPWarning .btn1:hover {
background-color: rgb(89,210,120);
border: none;
color: #fff;
}
 #giveMoneyAlert .alertPWarning .btn1:active {
background-color: rgb(69,191,102);
border: none;
color: #fff;
}
 #giveMoneyAlert .alertPWarning .btn2:hover {
background-color: rgb(89,210,120);
border: none;
color: #fff;
}
 #giveMoneyAlert .alertPWarning .btn2:active {
background-color: rgb(69,191,102);
border: none;
color: #fff;
}
#btnSuccessNext{
	border: none!important;
	outline: none!important;
	color: #fff!important;
	height: 26px!important;
	font-size: 10px;
	background-color:#47CD69!important;
	text-align: center!important;
	border-radius: 4px;
	margin-left: 10px;
	width: 70px;
    height: 30px!important;
}
#alertBoxWarningThree #agreeBtn #queRenCalData:hover{
	background-color: rgb(89,210,120);
	border: none;
	color: #fff;
}

#alertBoxWarningThree #agreeBtn #queRenCalData:active{
	background-color: rgb(69,191,102);
	border: none;
	color: #fff;
}

#alertBoxWarningOne .ConfirmCancel .btn1:hover, #alertBoxWarningOne .ConfirmCancel .btn2:hover{
	background-color: rgb(89,210,120);
	border: none;
	color: #fff;
}
#alertBoxWarningOne .ConfirmCancel .btn1:active, #alertBoxWarningOne .ConfirmCancel .btn2:active,
#myAlert .alertBoxWarningT #yanzhengmgSucceBtn:active{
	background-color: rgb(69,191,102);
	border: none;
	color: #fff;
}



</style>


#{/set}